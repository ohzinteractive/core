parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"INHd":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function n(){e(this,n)}return r(n,null,[{key:"merge_from_to",value:function(e,n){n.push.apply(n,e)}},{key:"expand_vec3_array",value:function(e,n){for(var r=n-e.length,t=0;t<r;t++)e.push(e[t].clone())}},{key:"remove_elem",value:function(e,n){var r=e.indexOf(n);r>-1&&e.splice(r,1)}}]),n}();exports.default=t;
},{}],"v0GF":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function n(){e(this,n)}return t(n,[{key:"start",value:function(){}},{key:"post_start",value:function(){}},{key:"end",value:function(){}},{key:"update",value:function(){}},{key:"on_post_render",value:function(){}},{key:"on_pre_render",value:function(){}},{key:"resources_fully_loaded",value:function(){}}]),n}();exports.default=o;
},{}],"QfnR":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main()\n{\n  vec3 pos = position;\n  mat4 MVP = projectionMatrix * modelViewMatrix;\n\n  gl_Position = MVP * vec4( pos, 1.0 );\n  vUv = uv;\n}";
},{}],"LSxb":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform vec3 _Color;\n\nvoid main()\n{\n    gl_FragColor = vec4(_Color, 1.0);\n}";
},{}],"Ej2H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/shaders/basic_color/basic_color_vert")),e=r(require("/shaders/basic_color/basic_color_frag"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=s(t);if(l()){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return i(this,e)}}function i(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(r){u(c,THREE.ShaderMaterial);var o=f(c);function c(r,u,f){return n(this,c),o.call(this,{vertexShader:r||t.default,fragmentShader:u||e.default,uniforms:f||{_Color:{value:new THREE.Color("#FF0000")}}})}return c}();exports.default=p;
},{"/shaders/basic_color/basic_color_vert":"QfnR","/shaders/basic_color/basic_color_frag":"LSxb"}],"XMgG":[function(require,module,exports) {
function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function t(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}var r=function(){function e(){n(this,e),this._current=void 0}return t(e,[{key:"current",set:function(n){this._current=n},get:function(){return this._current}}]),e}(),o=new r;module.exports=o;
},{}],"JIgx":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var h=t[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}function i(e,i,h){return i&&t(e.prototype,i),h&&t(e,h),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var h=function(){function t(){e(this,t),this.width=1,this.height=1,this.render_width=1,this.render_height=1,this.width_height=new THREE.Vector2(this.width,this.height),this.dpr=1,this.pixel_size=new THREE.Vector2(1/this.width,1/this.height)}return i(t,[{key:"update_size",value:function(e,t){this.width=e,this.height=t,this.pixel_size=new THREE.Vector2(1/this.width,1/this.height),this.width_height.x=e,this.width_height.y=t,this.render_width=e*this.dpr,this.render_height=t*this.dpr}},{key:"apply_pixel_density_v2",value:function(e){return e.multiplyScalar(1/window.devicePixelRatio),e}},{key:"apply_pixel_density",value:function(e){return e*(1/window.devicePixelRatio)}},{key:"get_pixel_size",value:function(){return this.pixel_size}},{key:"aspect_ratio",get:function(){return this.width/this.height}}]),t}(),n=new h;exports.default=n;
},{}],"RyjO":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}var o=function(){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,t),this.dpr=window.devicePixelRatio?window.devicePixelRatio:1,this.is_mobile=!1,this.is_ios=!1,this.is_ipad=!1,this.vertex_image_unit_supported=!0,this.min_zoom_distance=3e3,this.max_zoom_distance=4e4,this.max_zoom_distance_scale=1.1,this.zoom_speed=.1,this.use_fxaa=!1,this.use_ssaa=!0,this.background_color=new THREE.Color(.768,.768,.768),this.touch_sensitivity=1.5,this.zoom_sensitivity=.7,this.spin_sensitivity=2,this.three_finger_rotation_speed=3,this.three_finger_allowed_x_rotation_offset=30,this.three_finger_allowed_y_rotation_offset=20,this.use_touch_gestures=!1,this.texture_float_supported=!1,this.use_ortographic=!0,this.hover_enabled=!1,this.rotation_enabled=!1,this.transparency_amount=.2,this.show_debug_sphere_on_floor_selection=!1,this.show_debug_sphere_on_steps_in_floor=!1,this.display_cleanup_log=!1,this.navigation_speed_damping=.74,this.navigation_speed=200,this.out_of_bounds_force=1.5,this.mouse_zoom_speed=.05,this.touch_zoom_speed=.5}return i(t,[{key:"from_json",value:function(e){}}]),t}(),s=new o;module.exports=s;
},{}],"wewU":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var _=t[i];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(e,_.key,_)}}function i(e,i,_){return i&&t(e.prototype,i),_&&t(e,_),e}var _=function(){function t(){e(this,t),this.___time=new THREE.Clock,this.__delta_time=0,this.__elapsed_time=0,this.__allocated_time=new THREE.Vector2(0,0)}return i(t,[{key:"__update",value:function(){this.__delta_time=this.___time.getDelta(),this.__elapsed_time=this.___time.getElapsedTime()}},{key:"delta_time",get:function(){return this.__delta_time<.4?this.__delta_time:.016}},{key:"elapsed_time",get:function(){return this.__elapsed_time}},{key:"shader_time",get:function(){return this.__allocated_time.x=this.delta_time,this.__allocated_time.y=this.elapsed_time,this.__allocated_time}}]),t}(),a=new _;module.exports=a;
},{}],"Oo8n":[function(require,module,exports) {
"use strict";function e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function s(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyboardInput=void 0;var n=function(){function s(){e(this,s),this.ctrlz_pressed=!1,this.ctrlz_fired=!1,this.keys=[]}return t(s,[{key:"init",value:function(){document.onkeydown=this.on_key_down.bind(this),document.onkeyup=this.on_key_up.bind(this),document.onkeypress=this.on_key_press.bind(this)}},{key:"on_key_down",value:function(e){90==e.keyCode&&e.ctrlKey&&!this.ctrlz_fired&&(this.ctrlz_pressed=!0,this.ctrlz_fired=!0),e.key&&this.press_key(e.key)}},{key:"on_key_press",value:function(e){}},{key:"on_key_up",value:function(e){this.release_keys()}},{key:"clear",value:function(){this.ctrlz_pressed=!1;for(var e=0;e<this.keys.length;e++)this.keys[e].pressed=!1}},{key:"release_keys",value:function(){this.ctrlz_fired=!1;for(var e=0;e<this.keys.length;e++)this.keys[e].fired=!1,this.keys[e].down=!1}},{key:"press_key",value:function(e){for(var s=0;s<this.keys.length;s++)this.keys[s].key_name!==e||this.keys[s].fired||(this.keys[s].pressed=!0,this.keys[s].down=!0,this.keys[s].fired=!0)}},{key:"key_is_pressed",value:function(e){for(var s=0;s<this.keys.length;s++)if(this.keys[s].key_name===e)return this.keys[s].pressed;return!1}},{key:"key_is_down",value:function(e){for(var s=0;s<this.keys.length;s++)if(this.keys[s].key_name===e)return this.keys[s].down;return!1}},{key:"register_key",value:function(e){this.keys.push({key_name:e,pressed:!1,down:!1,up:!1,fired:!1})}},{key:"unregister_key",value:function(e){for(var s=void 0,t=0;t<this.keys.length;t++)this.keys[t].key_name===e&&(s=this.keys[t]);var n=this.keys.indexOf(s);n>-1&&this.keys.splice(n,1)}}]),s}();exports.KeyboardInput=n;var i=new n;module.exports=i;
},{}],"k3P6":[function(require,module,exports) {
"use strict";var t=o(require("/Screen")),e=o(require("/Configuration")),i=o(require("/Time")),s=o(require("/KeyboardInput"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function u(t,e,i){return e&&_(t.prototype,e),i&&_(t,i),t}var a=function(){function e(){n(this,e),this.mouse_pos=new THREE.Vector2,this.last_mouse_pos=new THREE.Vector2,this.mouse_dir=new THREE.Vector2,this.__clicked_time=0,this.__elapsed_time=0,this.__delta_time=0,this.is_mouse_down=!1,this.is_mouse_up=!1,this.rotation_angle=0,this._normalized_mouse_pos=new THREE.Vector2(0,0),this.left_mouse_button_down=!1,this.left_mouse_button_pressed=!1,this.left_mouse_button_released=!1,this.middle_mouse_button_down=!1,this.right_mouse_button_down=!1,this.right_mouse_button_pressed=!1,this.right_mouse_button_released=!1,this.mousewheel=0,this.previous_scale=0,this.previous_rotation=0,this.previous_rotation_dirty=!0,this.mouse_str="mouse",this.tmp_mouse_velocity=new THREE.Vector2,this.bounding_client=new THREE.Vector2,this.multitouch_active=!1,this.tapped=!1,this.initial_zoom_distance=100,this.zoom_center=new THREE.Vector2,this.zoom_started=!1,this.touch_zoom=1,this.multi_touch_dir=new THREE.Vector2,this.wheel_delta=0,this.mac="mac",this.pinching_with_trackpad=!1,this.scrolling_with_trackpad=!1,this.scrolling_with_mouse=!1,this.double_click=!1,this.canvas=void 0,this.previous_pos_x=0,this.previous_pos_y=0}return u(e,[{key:"mouse_is_within_bounds",value:function(t){return t=t||this.canvas.getBoundingClientRect(),this.mouse_pos.x>t.left&&this.mouse_pos.x<t.left+t.width&&this.mouse_pos.y>t.top&&this.mouse_pos.y<t.top+t.height}},{key:"init",value:function(t,e){var i=this;this.canvas=e;var o=new ZingTouch.Region(t,!1,!1);s.default.init();var n=this;o.bind(t,"tap",function(t){n.tapped=!0,n.set_mouse_pos(t)}),window.addEventListener("dblclick",this.on_double_click.bind(this)),t.addEventListener("mouseleave",this.on_focus_lost.bind(this)),t.addEventListener("mouseup",this.on_mouse_up.bind(this)),t.addEventListener("mousemove",this.on_mouse_move.bind(this)),t.addEventListener("touchmove",this.on_touch_move.bind(this),!1),t.addEventListener("touchend",this.on_touch_end.bind(this),!1);var _=new ZingTouch.Pan({numInputs:1});o.register("one_finger_pan",_),o.bind(t,"one_finger_pan",function(t){t.detail.data.length});var u=new ZingTouch.Pan({numInputs:2});o.register("two_fingers_pan",u),o.bind(t,"two_fingers_pan",function(t){t.detail.data.length>0&&(n.multi_touch_dir.set(t.detail.data[0].change.x,t.detail.data[0].change.y),n.multi_touch_dir.multiplyScalar(n.__delta_time))});var a=new ZingTouch.Pan({numInputs:3});o.register("three_fingers_pan",a),o.bind(t,"three_fingers_pan",function(t){t.detail.data.length>0&&(n.multi_touch_dir.set(t.detail.data[0].change.x,t.detail.data[0].change.y),n.multi_touch_dir.multiplyScalar(n.__delta_time))}),o.bind(t,"distance",function(t){n.zoom_started||(n.zoom_started=!0,n.touch_zoom_delta=0,n.initial_zoom_distance=t.detail.distance,n.last_zoom_distance=t.detail.distance,n.zoom_center.set(t.detail.center.x,t.detail.center.y),n.mouse_pos.set(t.detail.center.x,t.detail.center.y)),n.touch_zoom_delta=t.detail.distance-n.last_zoom_distance,n.last_zoom_distance=t.detail.distance,n.touch_zoom=1},!1);var h=new ZingTouch.Gesture;h.end=function(t,e,i){n.on_gesture_end(t)},h.start=function(t,e,i){n.on_mouse_down(t)},o.register("shortTap",h),o.bind(t,"shortTap",function(t){}),window.addEventListener("wheel",this.on_mouse_wheel.bind(this)),t.addEventListener("contextmenu",function(t){t.preventDefault()},!1),t.addEventListener("mousemove",function(t){i.mouse_pos.x=t.clientX,i.mouse_pos.y=t.clientY,i.scrolling_with_mouse=!1,i.scrolling_with_trackpad=!1,i.pinching_with_trackpad=!1})}},{key:"set_mouse_pos",value:function(t){this.mouse_pos.x=t.detail.events[0].clientX,this.mouse_pos.y=t.detail.events[0].clientY}},{key:"is_mac",value:function(){return this.get_os()===this.mac}},{key:"on_double_click",value:function(t){this.double_click=!0}},{key:"on_mouse_wheel",value:function(t){this.mouse_pos.x=t.clientX,this.mouse_pos.y=t.clientY,this.is_mac()?t.ctrlKey?(console.log("Pinching with a touchpad",t.deltaY),this.pinching_with_trackpad=!0,this.scrolling_with_trackpad=!1,this.scrolling_with_mouse=!1):this.is_int(t.deltaY)?(this.pinching_with_trackpad=!1,this.scrolling_with_trackpad=!0,this.scrolling_with_mouse=!1,this.wheel_delta=1-t.deltaY/350*2-1):(this.pinching_with_trackpad=!1,this.scrolling_with_trackpad=!1,this.scrolling_with_mouse=!0,this.wheel_delta=t.deltaY/Math.abs(t.deltaY)):(this.pinching_with_trackpad=!1,this.scrolling_with_trackpad=!1,this.scrolling_with_mouse=!0,Math.abs(t.deltaY)<1e-4?this.wheel_delta=0:this.wheel_delta=t.deltaY/Math.abs(t.deltaY))}},{key:"on_mouse_down",value:function(t){switch(this.mouse_pos.x=t[0].current.clientX,this.mouse_pos.y=t[0].current.clientY,this.multitouch_active=t.length>1,this.mouse_dir.x=0,this.mouse_dir.y=0,this.__clicked_time=this.__elapsed_time,this.is_mouse_down=!0,this.is_mouse_up=!1,t[0].current.originalEvent.which){case 1:this.left_mouse_button_down=!0,this.left_mouse_button_pressed=!0;break;case 2:this.middle_mouse_button_down=!0;break;case 3:this.right_mouse_button_down=!0,this.right_mouse_button_pressed=!0;break;default:this.left_mouse_button_down=!0,this.left_mouse_button_pressed=!0}this.wheel_delta=0,this.previous_scale=0,this.previous_rotation=0}},{key:"mouse_clicked",value:function(){return this.tapped}},{key:"on_touch_move",value:function(t){this.on_mouse_move({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY})}},{key:"on_touch_end",value:function(t){this.on_gesture_end([{current:{originalEvent:t}}])}},{key:"on_mouse_up",value:function(t){this.on_gesture_end([{current:{originalEvent:t}}])}},{key:"on_gesture_end",value:function(t){if(this.multitouch_active=!!t&&t.length>1,this.is_mouse_up=!0,this.zoom_started=!1,this.touch_zoom=1,this.mouse_dir.x=0,this.mouse_dir.y=0,this.previous_scale=0,this.previous_rotation=0,this.wheel_delta=0,this.left_mouse_button_down=!1,this.middle_mouse_button_down=!1,this.right_mouse_button_down=!1,t)switch(t[0].current.originalEvent.which){case 1:this.left_mouse_button_released=!0;break;case 2:this.middle_mouse_button_released=!0;break;case 3:this.right_mouse_button_released=!0;break;default:this.left_mouse_button_released=!0}this.is_mouse_down=!1,this.previous_rotation_dirty=!0,this.rotation_delta=0}},{key:"on_focus_lost",value:function(){this.on_gesture_end(),this.left_mouse_button_released=!0,this.middle_mouse_button_released=!0,this.right_mouse_button_released=!0,this.left_mouse_button_released=!0}},{key:"time_since_last_mouse_down",value:function(){return this.__elapsed_time-this.__clicked_time}},{key:"on_mouse_move",value:function(t){this.mouse_pos.x=t.clientX,this.mouse_pos.y=t.clientY,this.mouse_dir.set(this.mouse_pos.x-this.previous_pos_x,this.mouse_pos.x-this.previous_pos_y),this.mouse_dir.normalize(),this.previous_pos_x=this.mouse_pos.x,this.previous_pos_y=this.mouse_pos.x}},{key:"on_mouse_move_zingtouch",value:function(t){t.detail.data.length>0&&(this.set_mouse_pos(t),this.mouse_dir.set(t.detail.data[0].change.x,t.detail.data[0].change.y))}},{key:"get_os",value:function(){var t=window.navigator.userAgent,e=window.navigator.platform,i=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?i="mac":-1!==["iPhone","iPad","iPod"].indexOf(e)?i="ios":-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)?i="windows":/Android/.test(t)?i="android":!i&&/Linux/.test(e)&&(i="linux"),i}},{key:"is_int",value:function(t){return t%1==0}},{key:"clear",value:function(){this.__elapsed_time=i.default.elapsed_time,this.__delta_time=i.default.delta_time,this.is_mouse_up=!1,this.wheel_delta=0,this.rotation_delta=0,this.double_click=!1,this.tapped=!1,this.mouse_dir.multiplyScalar(0),this.multi_touch_dir.multiplyScalar(0),this.left_mouse_button_pressed=!1,this.left_mouse_button_released=!1,this.right_mouse_button_pressed=!1,this.right_mouse_button_released=!1,s.default.clear()}},{key:"normalized_mouse_pos",get:function(){return this._normalized_mouse_pos.x=this.mouse_pos.x/t.default.width*2-1,this._normalized_mouse_pos.y=-1*(this.mouse_pos.y/t.default.height*2-1),this._normalized_mouse_pos}},{key:"NDC",get:function(){return this.normalized_mouse_pos}}]),e}(),h=new a;module.exports=h;
},{"/Screen":"JIgx","/Configuration":"RyjO","/Time":"wewU","/KeyboardInput":"Oo8n"}],"sPjl":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){return function(){var e,r=i(t);if(f()){var n=i(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=function(t){r(c,THREE.Mesh);var n=o(c);function c(t,r){e(this,c),r=r||"#FF0000",t=t||1;var o=new THREE.SphereBufferGeometry(t,64,64),u=new THREE.MeshBasicMaterial({color:r});return n.call(this,o,u)}return c}();exports.default=s;
},{}],"iaBK":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvoid main()\n{\n  vec3 pos = position;\n  mat4 MVP = projectionMatrix * modelViewMatrix;\n\n  gl_Position = MVP * vec4( pos, 1.0 );\n  //gl_Position.zw -= 0.1;\n}";
},{}],"ezmQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("/editor/shaders/object_picker_vert")),t=r(require("/editor/shaders/object_picker_frag"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(){var t,r=_(e);if(y()){var n=_(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return f(this,t)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(r){u(a,THREE.Mesh);var n=c(a);function a(e,t){var r;return o(this,a),(r=n.call(this,e,t))._selectable_material=r.__get_selectable_material(),r.original_material=r.material,r.stored_layers=r.layers.mask,r}return i(a,[{key:"__get_selectable_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Color}},vertexShader:e.default,fragmentShader:t.default})}},{key:"restore_material",value:function(){this.material=this.original_material}},{key:"store_layer_state",value:function(){this.stored_layers=this.layers.mask}},{key:"restore_layer_state",value:function(){this.layers.mask=this.stored_layers}},{key:"selectable_material",get:function(){return this._selectable_material}}]),a}();exports.default=p;
},{"/editor/shaders/object_picker_vert":"iaBK","/editor/shaders/object_picker_frag":"LSxb"}],"E21w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/Mesh"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=y(t);if(l()){var n=y(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){c(o,t.default);var r=f(o);function o(t,e,u){var c;n(this,o),t=t||"#FF0000";var i=(e=e||1)-.4,f=new THREE.CylinderBufferGeometry(.01,.01,i,32);f.translate(0,i/2,0);var a=new THREE.ConeBufferGeometry(.1,.4,32);a.translate(0,i+.2,0);var s=THREE.BufferGeometryUtils.mergeBufferGeometries([f,a]);s.rotateX(1.57);var l=new THREE.MeshBasicMaterial({color:t});return c=r.call(this,s,l),u&&c.quaternion.setFromUnitVectors(new THREE.Vector3(0,0,1),u),c}return u(o,[{key:"dir",set:function(t){this.quaternion.setFromUnitVectors(new THREE.Vector3(0,0,1),t)}},{key:"length",set:function(t){this.scale.z=t}}]),o}();exports.default=p;
},{"/Mesh":"ezmQ"}],"qvMM":[function(require,module,exports) {
function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var r=function(){function n(){e(this,n),this._current=new THREE.Scene,this._current.name="default_scene"}return t(n,[{key:"add_scene",value:function(e){}},{key:"current",get:function(){return this._current},set:function(e){this._current=e}}]),n}(),u=new r;module.exports=u;
},{}],"ayC1":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function n(){e(this,n)}return t(n,null,[{key:"linear_map",value:function(e,n,t,r,o){return(e-n)/(t-n)*(o-r)+r}},{key:"between",value:function(e,n,t){return e>=n&&e<=t}},{key:"rgb_to_hex",value:function(e){return e.r=Math.round(255*e.r).toString(16),e.g=Math.round(255*e.g).toString(16),e.b=Math.round(255*e.b).toString(16),1==e.r.length&&(e.r="0"+e.r),1==e.g.length&&(e.g="0"+e.g),1==e.b.length&&(e.b="0"+e.b),"#"+e.r+e.g+e.b}},{key:"project_points_on_plane",value:function(e,n){for(var t=new THREE.Vector3,r=[],o=0;o<e.length;o++)n.projectPoint(e[o],t),r.push(t.clone());return r}},{key:"matrix4_lerp",value:function(e,n,t,r){for(var o=0;o<16;o++)t.elements[o]=THREE.Math.lerp(e.elements[o],n.elements[o],r)}},{key:"equals",value:function(e,n){return Math.abs(e-n)<1e-6}}]),n}();exports.default=r;
},{}],"ugwp":[function(require,module,exports) {
"use strict";var t=u(require("/CameraManager")),e=u(require("/Input")),r=u(require("/primitives/Sphere")),n=u(require("/primitives/Arrow")),i=u(require("/SceneManager")),a=u(require("/utilities/MathUtilities")),o=u(require("/Screen"));function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}var h=function(){function r(){s(this,r),this.tmp_mat=new THREE.Matrix4,this.tmp_vec=new THREE.Vector3(0,0,1),this.tmp_vec2=new THREE.Vector3(0,0,0),this.plane=new THREE.Plane,this.ray=new THREE.Ray,this.tmp_size=new THREE.Vector3,this.tmp_unproj=new THREE.Vector3}return p(r,[{key:"get_up_dir",value:function(e){return e=e||t.default.current,this.tmp_vec.set(0,1,0),this.tmp_vec.applyQuaternion(e.quaternion),this.tmp_vec}},{key:"get_forward_dir",value:function(e){return e=e||t.default.current,this.tmp_vec.set(0,0,1),this.tmp_vec.applyQuaternion(e.quaternion),this.tmp_vec}},{key:"get_right_dir",value:function(e){return e=e||t.default.current,this.tmp_vec.set(1,0,0),this.tmp_vec.applyQuaternion(e.quaternion),this.tmp_vec}},{key:"unproject_mouse_position",value:function(e,r){var n=(r=r||t.default.current).fov/2*Math.PI/180,i=2*Math.atan(Math.tan(n)*r.aspect)/2,a=Math.tan(n)*r.far,o=Math.tan(i)*r.far;return this.tmp_vec.set(o*e.x,a*e.y,-r.far).normalize(),this.tmp_vec.applyQuaternion(r.quaternion)}},{key:"get_plane_intersection",value:function(r,n,i,a){return a=a||t.default.current,i=i||e.default.normalized_mouse_pos,this.plane.setFromNormalAndCoplanarPoint(n||this.get_forward_dir(a),r),a.isPerspectiveCamera?this.ray.set(a.position,this.unproject_mouse_position(i,a)):(this.tmp_unproj.set(i.x,i.y,1).unproject(a),this.ray.set(a.position,this.tmp_unproj)),this.ray.intersectPlane(this.plane,this.tmp_vec2),this.tmp_vec2}},{key:"fit_points_on_camera",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=(new THREE.Sphere).setFromPoints(e).center,i=this.get_forward_dir(t.default.current).clone(),o=(new THREE.Plane).setFromNormalAndCoplanarPoint(i,n),u=a.default.project_points_on_plane(e,o),s=new THREE.Vector3,c=(new THREE.Box3).setFromPoints(u);c.getCenter(s);for(var p=new THREE.Vector3(0,1,0).applyQuaternion(t.default.current.quaternion),h=p.clone().cross(i).normalize(),_=(new THREE.Matrix4).set(h.x,p.x,i.x,n.x,h.y,p.y,i.y,n.y,h.z,p.z,i.z,n.z,0,0,0,1),l=(new THREE.Matrix4).getInverse(_),m=0;m<u.length;m++)u[m].applyMatrix4(l);var f=new THREE.Vector3;(c=(new THREE.Box3).setFromPoints(u)).getSize(f),f.multiplyScalar(r);var v=new THREE.Vector3;return c.getCenter(v),{position:s,zoom:this.get_zoom_to_fit_rect(f.x/2,f.y/2)}}},{key:"get_zoom_to_fit_rect",value:function(e,r){var n=t.default.current.fov/2*Math.PI/180,i=2*Math.atan(Math.tan(n)*t.default.current.aspect)/2,a=r/Math.tan(n),o=e/Math.tan(i);return Math.max(Math.abs(o),Math.abs(a))}},{key:"get_zoom_to_fit_box",value:function(t,e){if(e.isOrthographicCamera){t.getSize(this.tmp_size);var r=this.tmp_size.x,n=this.tmp_size.y,i=r/n;return o.default.aspect_ratio/i>1?o.default.height/n:o.default.width/r}var a=new THREE.Vector3;return t.getSize(a),this.get_zoom_to_fit_rect(a.x,a.y)}},{key:"get_html_screen_pos",value:function(t,e){return t.getWorldPosition(this.tmp_vec),this.tmp_vec.project(e),this.tmp_vec.x=(.5*this.tmp_vec.x+.5)*o.default.width,this.tmp_vec.y=(1-(.5*this.tmp_vec.y+.5))*o.default.height,this.tmp_vec}},{key:"update_projection",value:function(t){t.left=-o.default.width/2,t.right=o.default.width/2,t.top=o.default.height/2,t.bottom=-o.default.height/2,t.aspect=o.default.aspect_ratio,t.updateProjectionMatrix(!0)}}]),r}(),_=new h;module.exports=_;
},{"/CameraManager":"XMgG","/Input":"k3P6","/primitives/Sphere":"sPjl","/primitives/Arrow":"E21w","/SceneManager":"qvMM","/utilities/MathUtilities":"ayC1","/Screen":"JIgx"}],"hZlU":[function(require,module,exports) {
function a(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function t(){a(this,t),this.max_anisotropy=0,this.vertex_texture_sampler_available=!1,this.fp_textures_available=!1},e=new t;module.exports=e;
},{}],"ZeWG":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function n(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function t(){e(this,t)}return n(t,null,[{key:"ease_out_sine",value:function(e){return Math.sin(3.14*e/2)}},{key:"ease_in_out_cubic",value:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},{key:"ease_out_cubic",value:function(e){return 1-Math.pow(1-e,3)}},{key:"ease_in_out_quint",value:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},{key:"ease_out_quint",value:function(e){return 1-Math.pow(1-e,5)}},{key:"ease_in_out_circ",value:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},{key:"ease_out_quad",value:function(e){return 1-(1-e)*(1-e)}}]),t}();exports.default=u;
},{}],"pJqg":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}var o=function(){function t(){e(this,t),this.queue={},this.zoom_changed_evt="zoom_changed",this.store_clickd_evt="store_clicked",this.point_selected_evt="point_selected",this.config_changed="config_changed",this.path_substep_completed="path_substep_completed",this.path_completed="path_completed",this.go_to_store_requested_evt="go_to_store_requested",this.resource_loaded_evt="resource_loaded",this.service_clicked_evt="service_clicked",this.unit_pos_updated_evt="unit_position_updated",this.floor_changed_evt="floor_changed",this.on_enter_floor_navigation="on_enter_floor_navigation",this.on_exit_floor_navigation="on_exit_floor_navigation",this.on_enter_floor_selection="on_enter_floor_selection",this.on_exit_floor_selection="on_exit_floor_selection",this.on_enter_outside_navigation="on_enter_outside_navigation",this.on_exit_outside_navigation="on_exit_outside_navigation",this.step_selected_evt="step_selected"}return i(t,[{key:"fire",value:function(e,t){var i=this.queue[e];if(void 0!==i)for(var o=i.length;o--;)i[o](t)}},{key:"on",value:function(e,t){void 0===this.queue[e]&&(this.queue[e]=[]),this.queue[e].push(t)}},{key:"fire_zoom_changed",value:function(e){this.fire(this.zoom_changed_evt,e)}},{key:"fire_store_selected",value:function(e){this.fire(this.store_clickd_evt,e)}},{key:"fire_point_selected",value:function(e){this.fire(this.point_selected_evt,e)}},{key:"fire_config_changed",value:function(){this.fire(this.config_changed)}},{key:"fire_path_substep_completed",value:function(e){this.fire(this.path_substep_completed,e)}},{key:"fire_path_completed",value:function(){this.fire(this.path_completed)}},{key:"fire_step_selected",value:function(e){this.fire(this.step_selected_evt,e)}},{key:"fire_go_to_store_requested",value:function(e){this.fire(this.go_to_store_requested_evt,e)}},{key:"fire_resource_loaded",value:function(e){this.fire(this.resource_loaded_evt,e)}},{key:"fire_service_clicked",value:function(e){this.fire(this.service_clicked_evt,e)}},{key:"fire_unit_position_updated",value:function(e){this.fire(this.unit_pos_updated_evt,e)}},{key:"fire_floor_switched",value:function(e){this.fire(this.floor_changed_evt,e)}},{key:"fire_on_enter_floor_navigation",value:function(e){this.fire(this.on_enter_floor_navigation,e)}},{key:"fire_on_exit_floor_navigation",value:function(e){this.fire(this.on_exit_floor_navigation,e)}},{key:"fire_on_enter_floor_selection",value:function(e){this.fire(this.on_enter_floor_selection,e)}},{key:"fire_on_exit_floor_selection",value:function(e){this.fire(this.on_exit_floor_selection,e)}},{key:"fire_on_enter_outside_navigation",value:function(e){this.fire(this.on_enter_outside_navigation,e)}},{key:"fire_on_exit_outside_navigation",value:function(e){this.fire(this.on_exit_outside_navigation,e)}}]),t}(),_=new o;module.exports=_;
},{}],"xAef":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return function(){var t,r=s(e);if(f()){var n=s(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return u(this,t)}}function u(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?a(t):r}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l=function(e){o(c,THREE.Object3D);var r=i(c);function c(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t(this,c),e=r.call(this);var o=new THREE.LineBasicMaterial({color:4474111,depthFunc:THREE.AlwaysDepth}),i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(0,0,0)),i.vertices.push(new THREE.Vector3(0,0,-1e3));var u=new THREE.Line(i,o);u.renderOrder=5e4;var a=new THREE.LineBasicMaterial({color:4521796,depthFunc:THREE.AlwaysDepth}),f=new THREE.Geometry;f.vertices.push(new THREE.Vector3(0,0,0)),f.vertices.push(new THREE.Vector3(0,1e3,0));var s=new THREE.Line(f,a);s.renderOrder=5e4;var l=new THREE.LineBasicMaterial({linewidth:100,color:16729156,depthFunc:THREE.AlwaysDepth}),p=new THREE.Geometry;p.vertices.push(new THREE.Vector3(0,0,0)),p.vertices.push(new THREE.Vector3(1e3,0,0));var y=new THREE.Line(p,l);return y.renderOrder=5e4,e.renderOrder=1e5,e.add(u),e.add(s),e.add(y),e.scale.set(n,n,n),e}return n(c,[{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),c}();exports.default=l;
},{}],"gDca":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function n(){e(this,n)}return t(n,[{key:"render",value:function(){}},{key:"on_enter",value:function(e,n){}},{key:"on_exit",value:function(e,n){}},{key:"resize",value:function(){}}]),n}();exports.default=r;
},{}],"bFlA":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function t(){e(this,t)}return n(t,null,[{key:"opaque",get:function(){return 0}},{key:"transparent",get:function(){return 1}},{key:"outline",get:function(){return 2}},{key:"selectable",get:function(){return 3}}]),t}();exports.default=r;
},{}],"aRZG":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex;\nuniform sampler2D _Blur;\nuniform vec2 _Screen;\nvarying vec2 vUv;\n\nfloat aastep(float threshold, float value) {\n  #ifdef GL_OES_standard_derivatives\n    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;\n    return smoothstep(threshold-afwidth, threshold+afwidth, value);\n  #else\n    return step(threshold, value);\n  #endif  \n}\n\nvoid main()\n{\n\tvec2 pixel_size = 1.0/_Screen;\n\n\tvec4 color = texture2D( _MainTex, vUv);\n\tfloat mask = 1.0 - color.a;\n\n\tfloat blur = texture2D( _Blur, vUv).a;\n\n  // gl_FragColor = vec4(mask,mask,mask,0.0);\n  // gl_FragColor = color;\n\n\tgl_FragColor = vec4(mix(color.rgb, mix(color.rgb, vec3(1.,0.,0.),aastep(0.076, blur)), mask), 1.0);\n}\n\n";
},{}],"GnKT":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex;\nuniform vec2 _Resolution;\nuniform vec2 _SampleDir;\nvarying vec2 vUv;\n\nvoid main()\n{\n\n\tvec3 sum = vec3(0.,0.,0.);\n\tvec2 dir = (0.5/_Resolution) * _SampleDir;\n\tfloat _Distance = 2.0;\n\tsum += texture2D( _MainTex, vUv + dir * -4. * _Distance ).rgb * 0.0525;\n\tsum += texture2D( _MainTex, vUv + dir * -3. * _Distance ).rgb * 0.075;\n\tsum += texture2D( _MainTex, vUv + dir * -2. * _Distance ).rgb * 0.110;\n\tsum += texture2D( _MainTex, vUv + dir * -1. * _Distance ).rgb * 0.150;\n\tsum += texture2D( _MainTex, vUv + dir *  0. * _Distance ).rgb * 0.225;\n\tsum += texture2D( _MainTex, vUv + dir *  1. * _Distance ).rgb * 0.150;\n\tsum += texture2D( _MainTex, vUv + dir *  2. * _Distance ).rgb * 0.110;\n\tsum += texture2D( _MainTex, vUv + dir *  3. * _Distance ).rgb * 0.075;\n\tsum += texture2D( _MainTex, vUv + dir *  4. * _Distance ).rgb * 0.0525;\n\tgl_FragColor = vec4(sum, 1.0);\n\n}\n";
},{}],"s876":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex;\n\nvarying vec2 vUv;\nvoid main()\n{\n\tgl_FragColor = texture2D(_MainTex, vUv);\n}";
},{}],"i1za":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec2 vUv;\nvoid main()\n{\n\tgl_Position = vec4(uv * 2.0 - 1.0, 1.0, 1.0);\n\tvUv = uv;\n}";
},{}],"F9Xn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("/Screen")),r=o(require("/RenderLayers")),t=o(require("/shaders/box_blur/compose_frag")),a=o(require("/shaders/box_blur/box_blur_frag")),i=o(require("/shaders/copy/copy_frag")),n=o(require("/shaders/copy/copy_vert")),l=o(require("/shaders/basic_color/basic_color_frag"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _(e,r,t){return r&&s(e.prototype,r),t&&s(e,t),e}var d=function(){function o(r){u(this,o),this.main_rt=new THREE.WebGLRenderTarget(e.default.width,e.default.height),this.rt1=new THREE.WebGLRenderTarget(e.default.width,e.default.height),this.rt2=new THREE.WebGLRenderTarget(e.default.width,e.default.height),this.compose_material=this.__get_compose_material(),this.copy_material=this.__get_copy_material(),this.box_blur_material=this.__get_box_blur_material(),this.background_material=this.__get_background_material(),this.copy_plane=new THREE.Mesh(new THREE.PlaneGeometry(1,1),this.copy_material),this.copy_plane.frustumCulled=!1,this.copy_scene=new THREE.Scene,this.copy_scene.add(this.copy_plane)}return _(o,[{key:"resize",value:function(e,r){this.main_rt.setSize(e,r),this.rt1.setSize(e,r),this.rt2.setSize(e,r),this.box_blur_material.uniforms._Screen.value.set(e,r),this.compose_material.uniforms._Screen.value.set(e,r)}},{key:"render",value:function(e){e.camera.updateMatrix(),e.camera.updateMatrixWorld(),e.camera.layers.enable(r.default.opaque),e.camera.layers.enable(r.default.transparent),e.camera.layers.disable(r.default.outline),e._renderer.setClearColor(e.clear_color,0),e._renderer.clearTarget(this.main_rt,!0,!0,!0),this.copy_scene.overrideMaterial=this.background_material,this.background_material.uniforms._Color.value.set(e.clear_color.r,e.clear_color.g,e.clear_color.b,0),e._renderer.render(this.copy_scene,e.camera,this.main_rt,!1),e._renderer.render(e.scene,e.camera,this.main_rt,!1),this.box_blur_material.uniforms._MainTex.value=this.main_rt.texture,this.box_blur_material.uniforms._SampleDir.value.set(1,0),this.copy_scene.overrideMaterial=this.box_blur_material,e._renderer.render(this.copy_scene,e.camera,this.rt1,!1),this.box_blur_material.uniforms._SampleDir.value.set(0,1),this.box_blur_material.uniforms._MainTex.value=this.rt1.texture,e._renderer.render(this.copy_scene,e.camera,this.rt2,!1),this.copy_scene.overrideMaterial=this.compose_material,this.compose_material.uniforms._MainTex.value=this.main_rt.texture,this.compose_material.uniforms._Blur.value=this.rt2.texture,e._renderer.render(this.copy_scene,e.camera,void 0,!1),this.copy_scene.overrideMaterial=void 0}},{key:"__get_copy_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_MainTex:{value:void 0}},vertexShader:n.default,fragmentShader:i.default,depthTest:!1,depthWrite:!1})}},{key:"__get_box_blur_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_MainTex:{value:void 0},_SampleDir:{value:new THREE.Vector2},_Screen:{value:new THREE.Vector2(e.default.width,e.default.height)}},vertexShader:n.default,fragmentShader:a.default,depthTest:!1,depthWrite:!1})}},{key:"__get_compose_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_MainTex:{value:void 0},_Blur:{value:void 0},_Screen:{value:new THREE.Vector2(e.default.width,e.default.height)}},vertexShader:n.default,fragmentShader:t.default,depthTest:!1,depthWrite:!1,extensions:{derivatives:!0}})}},{key:"__get_background_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Vector4(0,0,0,0)}},vertexShader:n.default,fragmentShader:l.default,depthTest:!0,depthWrite:!1})}},{key:"on_enter",value:function(e){e._renderer.autoClear=!1}},{key:"on_exit",value:function(e){e._renderer.autoClear=!0}}]),o}();exports.default=d;
},{"/Screen":"JIgx","/RenderLayers":"bFlA","/shaders/box_blur/compose_frag":"aRZG","/shaders/box_blur/box_blur_frag":"GnKT","/shaders/copy/copy_frag":"s876","/shaders/copy/copy_vert":"i1za","/shaders/basic_color/basic_color_frag":"LSxb"}],"Ftca":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/shaders/copy/copy_vert")),e=r(require("/shaders/copy/copy_frag"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(r){c(i,THREE.ShaderMaterial);var n=f(i);function i(r,c,f){var a;return u(this,i),n.call(this,(o(a={uniforms:{_MainTex:{value:null},_Resolution:{value:new THREE.Vector2(0,0)}},defines:f||{},vertexShader:c||t.default,fragmentShader:r||e.default,depthWrite:!1,blending:THREE.NoBlending,depthTest:!1},"depthWrite",!1),o(a,"depthFunc",THREE.AlwaysDepth),a))}return i}();exports.default=y;
},{"/shaders/copy/copy_vert":"i1za","/shaders/copy/copy_frag":"s876"}],"qoY1":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform vec4 _DepthNormal;\nvec2 EncodeFloatRG( float v )\n{\n    vec2 kEncodeMul = vec2(1.0, 255.0);\n    float kEncodeBit = 1.0/255.0;\n    vec2 enc = kEncodeMul * v;\n    enc = fract (enc);\n    enc.x -= enc.y * kEncodeBit;\n    return enc;\n}\n\nvec2 EncodeNormal (vec3 n)\n{\n    float scale = 1.7777;\n    vec2 enc = n.xy / (n.z+1.0);\n    enc /= scale;\n    enc = enc*0.5+0.5;\n    return enc;\n}\n\nvoid main()\n{\n    gl_FragColor = vec4(EncodeFloatRG(_DepthNormal.x), EncodeNormal(normalize(_DepthNormal.yzw)));  \n}";
},{}],"bGMu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/materials/BlitMaterial")),e=r(require("/shaders/clear/clear_depth_normal_frag"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=s(t);if(l()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return i(this,e)}}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(r){u(c,t.default);var n=f(c);function c(t,r){var u;return o(this,c),(u=n.call(this,e.default)).uniforms._DepthNormal={value:new THREE.Vector4(t,r.x,r.y,r.z)},u}return c}();exports.default=p;
},{"/materials/BlitMaterial":"Ftca","/shaders/clear/clear_depth_normal_frag":"qoY1"}],"DRHE":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec3 v_normal;\nvarying vec3 v_pos;\n\nvoid main()\n{\n  vec3 pos = position;\n  mat4 MVP = projectionMatrix * modelViewMatrix;\n\n  v_normal \t= (modelViewMatrix * vec4(normal, 0.0)).xyz;\n  v_pos \t\t= (modelViewMatrix * vec4( pos, 1.0 )).xyz;\n\n  gl_Position = MVP * vec4( pos, 1.0 );\n}";
},{}],"a4Wy":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec3 v_normal;\nvarying vec3 v_pos;\n\nuniform float _FarPlane;\n\nvec2 EncodeFloatRG( float v )\n{\n    vec2 kEncodeMul = vec2(1.0, 255.0);\n    float kEncodeBit = 1.0/255.0;\n    vec2 enc = kEncodeMul * v;\n    enc = fract (enc);\n    enc.x -= enc.y * kEncodeBit;\n    return enc;\n}\n\nvec2 EncodeNormal (vec3 n)\n{\n    float scale = 1.7777;\n    vec2 enc = n.xy / (n.z+1.0);\n    enc /= scale;\n    enc = enc*0.5+0.5;\n    return enc;\n}\n\nvoid main()\n{\n\tgl_FragColor = vec4(EncodeFloatRG(length(v_pos.z)/_FarPlane), EncodeNormal(normalize(v_normal)));\t\n}\n\n";
},{}],"VcOC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/shaders/depth_normals/depth_normals_vert")),e=r(require("/shaders/depth_normals/depth_normals_frag"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return function(){var e,r=y(t);if(p()){var n=y(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(r){c(u,THREE.ShaderMaterial);var n=a(u);function u(){return o(this,u),n.call(this,{uniforms:{_FarPlane:{value:1}},vertexShader:t.default,fragmentShader:e.default})}return f(u,[{key:"far_plane",set:function(t){this.uniforms._FarPlane.value=t}}]),u}();exports.default=h;
},{"/shaders/depth_normals/depth_normals_vert":"DRHE","/shaders/depth_normals/depth_normals_frag":"a4Wy"}],"pWL9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("/CameraManager")),t=n(require("/SceneManager")),r=n(require("/Screen")),a=n(require("/materials/ClearDepthNormalMaterial")),i=n(require("/materials/DepthNormalMaterial"));function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var o=function(){function t(){l(this,t),this.RT=new THREE.WebGLRenderTarget(r.default.width,r.default.height),this.clear_depth_normal_mat=new a.default(1,new THREE.Vector3(0,0,1)),this.depth_normal_material=new i.default}return h(t,[{key:"render",value:function(t){this.__resize_RT_if_necessary(),t.clear(this.RT,void 0,!0,!0),t.blit_clear_with_material(this.RT,this.clear_depth_normal_mat),this.depth_normal_material.far_plane=e.default.current.far,t.render(void 0,void 0,this.RT,this.depth_normal_material)}},{key:"__resize_RT_if_necessary",value:function(){this.RT.width===r.default.width&&this.RT.height===r.default.height||this.RT.setSize(r.default.width,r.default.height)}},{key:"render_target",get:function(){return this.RT}}]),t}();exports.default=o;
},{"/CameraManager":"XMgG","/SceneManager":"qvMM","/Screen":"JIgx","/materials/ClearDepthNormalMaterial":"bGMu","/materials/DepthNormalMaterial":"VcOC"}],"IerZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("/materials/BlitMaterial"));function t(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}var l=function(){function t(r){i(this,t),this.renderer=r,this._blit_scene=new THREE.Scene,this._blit_material=new e.default,this._blit_quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),this._blit_material),this._blit_scene.add(this._blit_quad),this._blit_camera=new THREE.OrthographicCamera(-1,1,1,-1,-1e4,1e4)}return a(t,[{key:"blit",value:function(e,t){this._blit_quad.material=this._blit_material,this._blit_quad.material.uniforms._MainTex.value=e.texture,this._blit_quad.material.uniforms._Resolution.value.set(e.width,e.height),this.renderer.setRenderTarget(void 0===t?null:t),this.renderer.render(this._blit_scene,this._blit_camera)}},{key:"blit_with_material",value:function(e,t,i){this._blit_quad.material=i,this._blit_quad.material.uniforms._MainTex.value=e.texture,this._blit_quad.material.uniforms._Resolution.value.set(e.width,e.height),this.renderer.setRenderTarget(void 0===t?null:t),this.renderer.render(this._blit_scene,this._blit_camera)}},{key:"blit_clear_with_material",value:function(e,t){this._blit_quad.material=t,this.renderer.setRenderTarget(void 0===e?null:e),this.renderer.render(this._blit_scene,this._blit_camera)}}]),t}();exports.default=l;
},{"/materials/BlitMaterial":"Ftca"}],"xMH9":[function(require,module,exports) {
"use strict";var e=o(require("/Configuration")),r=o(require("/render_mode/BaseRender")),t=o(require("/render_mode/OutlineRender")),i=o(require("/Screen")),n=o(require("/CameraManager")),d=o(require("/SceneManager")),l=o(require("/Capabilities")),u=o(require("/render_utilities/DepthAndNormalsRenderer")),s=o(require("/render_utilities/Blitter"));function o(e){return e&&e.__esModule?e:{default:e}}function h(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,r,t){return r&&_(e.prototype,r),t&&_(e,t),e}var f=function(){function e(){h(this,e),this._renderer=void 0,this.blitter=void 0,this.canvas=void 0,this.no_render=void 0,this.current_render_mode=void 0,this.generateDepthNormalTexture=!1,this.depth_and_normals_renderer=void 0}return c(e,[{key:"init",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._renderer=new THREE.WebGLRenderer({antialias:t,preserveDrawingBuffer:!0,alpha:!0,canvas:e}),this._renderer.autoClear=!1,this._renderer.setPixelRatio(1),i.default.dpr=window.devicePixelRatio,this._renderer.extensions.get("ANGLE_instanced_arrays"),this.blitter=new s.default(this._renderer),this.canvas=this._renderer.domElement,this.no_render=new r.default,this.current_render_mode=this.no_render,l.default.max_anisotropy=this._renderer.capabilities.getMaxAnisotropy(),l.default.vertex_texture_sampler_available=this._renderer.capabilities.maxVertexTextures>0,l.default.fp_textures_available=this._renderer.capabilities.floatVertexTextures,this.generateDepthNormalTexture=!1,this.depth_and_normals_renderer=new u.default}},{key:"set_state",value:function(e){console.log("VIEWAPI - map render mode switch to: "+e.constructor.name),this.current_render_mode.on_exit(this,this._renderer),this.current_render_mode=e,this.current_render_mode.on_enter(this,this._renderer)}},{key:"update",value:function(){this.check_for_resize(),this.generateDepthNormalTexture&&this.depth_and_normals_renderer.render(this),n.default.current&&(n.default.current.aspect=i.default.aspect_ratio,n.default.current.updateProjectionMatrix(),n.default.current.updateMatrix(),n.default.current.updateMatrixWorld(!0),this.current_render_mode.render())}},{key:"render",value:function(e,r,t,i){this.__apply_override_material(e,i),this._renderer.setRenderTarget(void 0===t?null:t),this._renderer.render(e||d.default.current,r||n.default.current),this.__apply_override_material(e,void 0)}},{key:"__apply_override_material",value:function(e,r){e?e.overrideMaterial=r:d.default.current.overrideMaterial=r}},{key:"readback_RT",value:function(e,r){this._renderer.readRenderTargetPixels(e,0,0,e.width,e.height,r)}},{key:"clear",value:function(e,r,t,i){this._renderer.setRenderTarget(void 0===e?null:e),r&&this._renderer.setClearColor(r.clear_color,r.clear_alpha),this._renderer.clear(!!r,!!t,!!i)}},{key:"check_for_resize",value:function(){var e=this.canvas.clientWidth,r=this.canvas.clientHeight;this.canvas.width===i.default.render_width&&this.canvas.height===i.default.render_height&&e===i.default.width&&r===i.default.height||(i.default.update_size(e,r),this._renderer.setSize(i.default.render_width,i.default.render_height,!1),this.current_render_mode.resize(i.default.render_width,i.default.render_height))}},{key:"on_resize",value:function(){console.error("Graphics.on_resize call no longer needed.")}},{key:"blit",value:function(e,r,t){t?this.blitter.blit_with_material(e,r,t):this.blitter.blit(e,r)}},{key:"blit_clear_with_material",value:function(e,r){this.blitter.blit_clear_with_material(e,r)}},{key:"take_screenshot",value:function(e){var r=i.default.width,t=i.default.height,a=parseInt(Math.ceil(4)),d=parseInt(Math.ceil(4));i.default.update_size(1024,1024),this._renderer.setPixelRatio(1),this._renderer.setSize(1024,1024,!1),this.ctx_2D.canvas.width=4096,this.ctx_2D.canvas.height=4096,n.default.current.aspect=i.default.aspect_ratio,n.default.current.updateMatrix(),n.default.current.updateMatrixWorld(!0);for(var l=0;l<a;l++)for(var u=0;u<d;u++)n.default.current.setViewOffset(4096,4096,i.default.width*l,i.default.height*u,i.default.width,i.default.height),this.current_render_mode.render(),this.ctx_2D.drawImage(this._renderer.domElement,i.default.width*l,i.default.height*u);this.ctx_2D.canvas.toBlob(e,"image/png;base64;"),n.default.current.clearViewOffset(),i.default.update_size(r,t),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(r,t,!1),n.default.current.aspect=i.default.aspect_ratio,n.default.current.updateMatrix(),n.default.current.updateMatrixWorld(!0)}},{key:"download_screenshot",value:function(e){console.log("el blob",e);var r=document.createElement("a");r.download="Snapshot.png",r.href=URL.createObjectURL(e),r.click(),r.onclick=function(){requestAnimationFrame(function(){URL.revokeObjectURL(a.href)}),a.removeAttribute("href")}}},{key:"dom_element",get:function(){return this._renderer.domElement}},{key:"depth_normals_RT",get:function(){return this.depth_and_normals_renderer.render_target}}]),e}(),v=new f;module.exports=v;
},{"/Configuration":"RyjO","/render_mode/BaseRender":"gDca","/render_mode/OutlineRender":"F9Xn","/Screen":"JIgx","/CameraManager":"XMgG","/SceneManager":"qvMM","/Capabilities":"hZlU","/render_utilities/DepthAndNormalsRenderer":"pWL9","/render_utilities/Blitter":"IerZ"}],"wyL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/Mesh"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return function(){var e,r=s(t);if(l()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)}}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a=function(e){o(u,t.default);var r=c(u);function u(t,e,o){n(this,u),t=t||new THREE.Vector3(1,1,1),e=e||new THREE.Vector3(1,1,1),o=o||16711680;var c=new THREE.BoxGeometry(t.x,t.y,t.z,e.x,e.y,e.z),f=new THREE.MeshBasicMaterial({color:o});return r.call(this,c,f)}return u}();exports.default=a;
},{"/Mesh":"ezmQ"}],"J9UP":[function(require,module,exports) {
"use strict";var e=c(require("/components/AxisHelper")),r=c(require("/shaders/basic_color/basic_color_vert")),t=c(require("/shaders/basic_color/basic_color_frag")),n=c(require("/SceneManager")),a=c(require("/Graphics")),o=c(require("/primitives/Cube")),i=c(require("/primitives/Sphere"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function l(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,r,t){return r&&l(e.prototype,r),t&&l(e,t),e}var s=function(){function a(){u(this,a),this.Vector3_one=new THREE.Vector3(1,1,1),this.Vector3_zero=new THREE.Vector3(0,0,0),this.canvas_renderer=void 0,this.rt_debug=void 0}return d(a,[{key:"init",value:function(e){this.webgl=e,this.ctx=void 0}},{key:"draw_axis",value:function(){var r=new e.default;return n.default.current.add(r),r}},{key:"set_debug_RT",value:function(e){this.rt_debug=e}},{key:"draw_rectangle",value:function(e,r,t,n){r=r||100,t=t||100,this.ctx.fillStyle=n||"rgba(255, 0, 0, 1)",this.ctx.fillRect(e.x-r/2,this.ctx.canvas.height-e.y-t/2,r,t)}},{key:"clear",value:function(){this.ctx&&this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"draw_line_2D",value:function(e,r,t){this.ctx.strokeStyle=t||"rgba(255, 0, 0, 1)",this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(r.x,r.y),this.ctx.closePath(),this.ctx.stroke()}},{key:"draw_line",value:function(e,r){var t=new THREE.LineBasicMaterial({color:r}),a=(new THREE.BufferGeometry).setFromPoints(e),o=new THREE.Line(a,t);return n.default.current.add(o),o}},{key:"draw_cube",value:function(e,r,t){r=r||1,t=t||16711680,e=e||new THREE.Vector3;var a=new o.default(new THREE.Vector3(r,r,r),void 0,t);return a.position.copy(e),n.default.current.add(a),a}},{key:"draw_oriented_cube",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,c=e.distanceTo(r),u=new o.default(new THREE.Vector3(i,t,c),void 0,a),l=r.clone().sub(e).multiplyScalar(.5),d=l.clone().normalize();l.add(e),u.position.copy(l);var s=new THREE.Vector3(0,1,0);d.clone().clone().cross(s);return u.quaternion.setFromUnitVectors(new THREE.Vector3(0,0,-1),d),n.default.current.add(u),u}},{key:"draw_plane",value:function(e,a,o){var i=new THREE.PlaneGeometry(e,a),c=new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Vector4(0,1,0,.2)}},vertexShader:r.default,fragmentShader:t.default,transparent:!0,depthWrite:!1}),u=new THREE.Mesh(i,c);return u.renderOrder=-1e4,n.default.current.add(u),u}},{key:"draw_empty_cube",value:function(e,r,t){r=r||1,t=t||16711680;var n=(new THREE.Box3).setFromCenterAndSize(new THREE.Vector3,new THREE.Vector3(r,r,r)),a=new THREE.Box3Helper(n,t);return a.position.copy(e||new THREE.Vector3),a}},{key:"draw_sphere",value:function(e,r,t){r=r||1,t=t||16711680,e=e||new THREE.Vector3;var a=new i.default(r,t);return a.position.copy(e),n.default.current.add(a),a}},{key:"draw_point_array",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],new THREE.CatmullRomCurve3(e,r));t.updateArcLengths();var n=t.getSpacedPoints(200);return this.draw_line(n,65280)}},{key:"draw_sphere_helper",value:function(e,r){r=r||16711680;var t=new THREE.SphereGeometry(e.radius,32,32),a=new THREE.MeshBasicMaterial({color:r}),o=new THREE.Mesh(t,a);return o.position.copy(e.center),n.default.current.add(o),o}},{key:"draw_math_sphere",value:function(e){var a=new THREE.SphereGeometry(e.radius,32,32),o=new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Vector4(1,0,0,.2)}},vertexShader:r.default,fragmentShader:t.default,transparent:!0}),i=new THREE.Mesh(a,o);i.position.copy(e.center),n.default.current.add(i)}},{key:"draw_bounding_box",value:function(e){var r=new THREE.Box3Helper(e,16776960);n.default.current.add(r)}},{key:"draw_curve",value:function(e,r){var t=new THREE.Vector3(0,0,0);r&&(t.y=r.offset||0);for(var n=0;n<e.length-1;n++)this.draw_line(e[n].clone().add(t),e[n+1].clone().add(t))}}]),a}(),h=new s;module.exports=h;
},{"/components/AxisHelper":"xAef","/shaders/basic_color/basic_color_vert":"QfnR","/shaders/basic_color/basic_color_frag":"LSxb","/SceneManager":"qvMM","/Graphics":"xMH9","/primitives/Cube":"wyL4","/primitives/Sphere":"sPjl"}],"Zz8J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("/CameraManager")),t=u(require("/SceneManager")),r=u(require("/Screen")),n=u(require("/render_mode/BaseRender")),o=u(require("/Graphics"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return function(){var t,r=h(e);if(b()){var n=h(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return y(this,t)}}function y(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(r){l(c,n.default);var u=p(c);function c(){return f(this,c),u.call(this)}return a(c,[{key:"render",value:function(){o.default.clear(void 0,e.default.current,!0,!0),o.default.render(t.default.current,e.default.current)}}]),c}();exports.default=v;
},{"/CameraManager":"XMgG","/SceneManager":"qvMM","/Screen":"JIgx","/render_mode/BaseRender":"gDca","/Graphics":"xMH9"}],"aVPl":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex; //albedo\nuniform sampler2D _NormalDepthRT;\nuniform mat4 _InverseProjMatrix;\nuniform vec2 _Resolution;\nvarying vec2 vUv;\nvarying vec4 vRay;\n\nvec3 decode_normal (vec4 enc)\n{\n    float scale = 1.7777;\n    vec3 nn =\n        enc.xyz*vec3(2.0*scale,2.0*scale,0.0) +\n        vec3(-scale,-scale,1.0);\n    float g = 2.0 / dot(nn.xyz,nn.xyz);\n    vec3 n;\n    n.xy = g*nn.xy;\n    n.z = g-1.0;\n    return n;\n}\n\nfloat DecodeFloatRG( vec2 enc )\n{\n    vec2 kDecodeDot = vec2(1.0, 1.0/255.0);\n    return dot( enc, kDecodeDot );\n}\n\nvec3 DecodeNormal(vec2 uv)\n{\n  vec2 encoded_normal = texture2D(_NormalDepthRT, uv).zw;\n  vec3 normalValue = normalize(decode_normal(vec4(encoded_normal, 0., 0.)));\n  return normalize(normalValue);\n}\nvec3 DecodeViewPos(vec2 uv)\n{\n  vec2 depth = texture2D(_NormalDepthRT, uv).xy;\n  vec4 inv_proj = _InverseProjMatrix * vec4(vUv * 2.0 - 1.0, 1.0, 1.0);\n  return DecodeFloatRG(depth) * (vRay.xyz/vRay.w);\n}\n\nvoid main()\n{\n\n    vec3 fragPos   = DecodeViewPos(vUv);\n    vec3 normal    = DecodeNormal(vUv);\n\n    vec3 dir_to_light = normalize(fragPos) * -1.0;\n\n    float diffuse = dot(normal, dir_to_light);\n\n    gl_FragColor = vec4(diffuse, diffuse, diffuse, 1.0);\n}\n";
},{}],"mld6":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec4 vRay;\n\nuniform mat4 _InverseProjMatrix;\n\nvoid main()\n{\n\tgl_Position = vec4(uv * 2.0 - 1.0, 1.0, 1.0);\n\tvRay = _InverseProjMatrix * vec4(uv * 2.0 - 1.0, 1.0, 1.0);\n\tvUv = uv;\n}\n";
},{}],"ITsm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("/materials/BlitMaterial")),t=n(require("/shaders/deferred/deferred_compose.frag")),r=n(require("/shaders/deferred/blit_copy.vert"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return function(){var t,r=d(e);if(y()){var n=d(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return s(this,t)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(n){c(i,e.default);var o=l(i);function i(){var e;return u(this,i),(e=o.call(this,t.default,r.default)).uniforms._NormalDepthRT={value:void 0},e.uniforms._AlbedoRT={value:void 0},e.uniforms._InverseProjMatrix={value:new THREE.Matrix4},e}return f(i,[{key:"set_normal_depth_rt",value:function(e){this.uniforms._NormalDepthRT.value=e.texture}},{key:"set_albedo_rt",value:function(e){this.uniforms._AlbedoRT.value=e}},{key:"set_proj_matrix",value:function(e){this.uniforms._InverseProjMatrix.value.getInverse(e)}}]),i}();exports.default=b;
},{"/materials/BlitMaterial":"Ftca","/shaders/deferred/deferred_compose.frag":"aVPl","/shaders/deferred/blit_copy.vert":"mld6"}],"s8VP":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec4 vProjPos;\nvarying vec3 vCenter;\n\nvoid main()\n{\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    vProjPos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\tvUv = uv;\n    vCenter = vec3(modelMatrix[3][0],modelMatrix[3][1],modelMatrix[3][2]);\n    vCenter = (viewMatrix * vec4(vCenter, 1.0)).xyz;\n}\n";
},{}],"Whr1":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _AlbedoTex; //albedo\nuniform sampler2D _NormalDepthTex;\nuniform mat4 _InverseProjMatrix;\nvarying vec2 vUv;\nvarying vec4 vProjPos;\nvarying vec3 vCenter;\n\nuniform float _Intensity;\n\nvec3 decode_normal (vec4 enc)\n{\n    float scale = 1.7777;\n    vec3 nn =\n        enc.xyz*vec3(2.0*scale,2.0*scale,0.0) +\n        vec3(-scale,-scale,1.0);\n    float g = 2.0 / dot(nn.xyz,nn.xyz);\n    vec3 n;\n    n.xy = g*nn.xy;\n    n.z = g-1.0;\n    return n;\n}\n\nfloat DecodeFloatRG( vec2 enc )\n{\n    vec2 kDecodeDot = vec2(1.0, 1.0/255.0);\n    return dot( enc, kDecodeDot );\n}\n\nvec3 DecodeNormal(vec2 uv)\n{\n  vec2 encoded_normal = texture2D(_NormalDepthTex, uv).zw;\n  vec3 normalValue = normalize(decode_normal(vec4(encoded_normal, 0., 0.)));\n  return normalize(normalValue);\n}\nvec3 DecodeViewPos(vec2 uv, vec4 ray)\n{\n  vec2 depth = texture2D(_NormalDepthTex, uv).xy;\n  vec4 inv_proj = _InverseProjMatrix * vec4(uv * 2.0 - 1.0, 1.0, 1.0);\n  return DecodeFloatRG(depth) * (ray.xyz/ray.w);\n}\n\nfloat saturate(float x)\n{\n    return clamp(x, 0.0, 1.0);\n}\n\nvoid main()\n{\n    vec2 uv = (vProjPos.xy/vProjPos.w)*0.5+vec2(0.5);\n\tvec4 ray = _InverseProjMatrix * vec4(uv * 2.0 - 1.0, 1.0, 1.0);\n\n    vec3 fragPos   = DecodeViewPos(uv, ray);\n    vec3 normal    = DecodeNormal(uv);\n    vec3 albedo    = texture2D(_AlbedoTex, uv).rgb;\n\n    vec3 dir_to_light = normalize(vCenter - fragPos);\n    float diffuse = saturate(dot(normal, dir_to_light));\n    float attenuation = _Intensity/pow(length(vCenter - fragPos), 2.0);\n    gl_FragColor = vec4(albedo * diffuse * attenuation, 1.0);\n}\n";
},{}],"dxxC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("/shaders/deferred/point_light.vert")),t=n(require("/shaders/deferred/point_light.frag")),r=n(require("/materials/BaseShaderMaterial"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return function(){var t,r=d(e);if(y()){var n=d(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return s(this,t)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(n){a(i,r.default);var o=l(i);function i(){var r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return u(this,i),(r=o.call(this,e.default,t.default,{_Intensity:{value:n},_AlbedoTex:{value:void 0},_NormalDepthTex:{value:void 0},_InverseProjMatrix:{value:new THREE.Matrix4}})).blending=THREE.AdditiveBlending,r.depthWrite=!1,r.side=THREE.BackSide,r}return f(i,[{key:"set_inverse_proj_matrix",value:function(e){this.uniforms._InverseProjMatrix.value.copy(e)}},{key:"set_normal_depth_rt",value:function(e){this.uniforms._NormalDepthTex.value=e.texture}},{key:"set_albedo_rt",value:function(e){this.uniforms._AlbedoTex.value=e.texture}}]),i}();exports.default=v;
},{"/shaders/deferred/point_light.vert":"s8VP","/shaders/deferred/point_light.frag":"Whr1","/materials/BaseShaderMaterial":"Ej2H"}],"VyPa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("/CameraManager")),t=u(require("/SceneManager")),r=u(require("/Screen")),n=u(require("/render_mode/BaseRender")),o=u(require("/materials/DeferredRendererComposeMaterial")),i=u(require("/Graphics")),a=u(require("/materials/deferred/DeferredPointLightMaterial"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return function(){var t,r=v(e);if(y()){var n=v(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return p(this,t)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(u){d(l,n.default);var c=h(l);function l(){var e;f(this,l),(e=c.call(this)).compose_mat=new o.default,e.main_rt=new THREE.WebGLRenderTarget(r.default.width,r.default.height,{}),e.scene_lights=new THREE.Scene;for(var t=Math.sqrt(204.8)/2,n=new THREE.Mesh(new THREE.SphereBufferGeometry(t),new a.default(1)),i=0;i<2;i++)for(var u=0;u<2;u++){var s=n.clone();s.position.set(2*i-1,1,2*u-1),e.scene_lights.add(s)}return e.camera_inverse_proj_mat=new THREE.Matrix4,e}return s(l,[{key:"on_enter",value:function(){i.default.generateDepthNormalTexture=!0}},{key:"render",value:function(){this.__check_RT_size(),i.default.clear(this.main_rt,e.default.current,!0,!1),i.default.render(t.default.current,e.default.current,this.main_rt),this.camera_inverse_proj_mat.getInverse(e.default.current.projectionMatrix);var r=this.camera_inverse_proj_mat,n=this.main_rt,o=i.default.depth_normals_RT;this.scene_lights.traverse(function(e){e.material&&(e.material.set_inverse_proj_matrix(r),e.material.set_normal_depth_rt(o),e.material.set_albedo_rt(n))}),i.default.clear(void 0,e.default.current,!0,!0),i.default.render(this.scene_lights,e.default.current)}},{key:"__check_RT_size",value:function(){this.main_rt.width===r.default.width&&this.main_rt.height===r.default.height||this.main_rt.setSize(r.default.width,r.default.height)}}]),l}();exports.default=b;
},{"/CameraManager":"XMgG","/SceneManager":"qvMM","/Screen":"JIgx","/render_mode/BaseRender":"gDca","/materials/DeferredRendererComposeMaterial":"ITsm","/Graphics":"xMH9","/materials/deferred/DeferredPointLightMaterial":"dxxC"}],"oP7G":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec3 v_normal;\n\nvoid main()\n{\n    gl_FragColor = vec4(v_normal * 0.5 + vec3(0.5), 1.0);\n}\n";
},{}],"OGPa":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec3 v_normal;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    v_normal = (modelMatrix * vec4(normal, 0.0)).xyz;\n}\n";
},{}],"yMPJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/shaders/normal/normal.frag")),e=r(require("/shaders/normal/normal.vert"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=s(t);if(l()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return i(this,e)}}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(r){u(c,THREE.ShaderMaterial);var n=f(c);function c(){return o(this,c),n.call(this,{uniforms:{},vertexShader:e.default,fragmentShader:t.default})}return c}();exports.default=p;
},{"/shaders/normal/normal.frag":"oP7G","/shaders/normal/normal.vert":"OGPa"}],"M0uM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("/CameraManager")),t=c(require("/SceneManager")),r=c(require("/Screen")),n=c(require("/render_mode/BaseRender")),o=c(require("/Graphics")),u=c(require("/materials/NormalMaterial"));function c(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return function(){var t,r=m(e);if(h()){var n=m(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return d(this,t)}}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(r){s(i,n.default);var c=y(i);function i(){return f(this,i),c.call(this)}return l(i,[{key:"render",value:function(){o.default.clear(void 0,e.default.current,!0,!0),o.default.render(t.default.current,e.default.current,void 0,new u.default)}}]),i}();exports.default=v;
},{"/CameraManager":"XMgG","/SceneManager":"qvMM","/Screen":"JIgx","/render_mode/BaseRender":"gDca","/Graphics":"xMH9","/materials/NormalMaterial":"yMPJ"}],"rJQo":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function t(){e(this,t)}return n(t,null,[{key:"xml_to_json",value:function(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var o=e.attributes.item(n);t["@attributes"][o.nodeName]=o.nodeValue}}}else 3==e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes.item(r),a=i.nodeName;if(void 0===t[a])t[a]=this.xml_to_json(i);else{if(void 0===t[a].push){var u=t[a];t[a]=[],t[a].push(u)}t[a].push(this.xml_to_json(i))}}return t}}]),t}();exports.default=o;
},{}],"iUFL":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){return function(){var e,r=i(t);if(f()){var o=i(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return c(this,e)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l=function(t){r(c,THREE.PerspectiveCamera);var o=n(c);function c(t,r,n,u){var f;return e(this,c),(f=o.call(this,t,r,n,u)).clear_color=new THREE.Color("#000000"),f.clear_alpha=1,f}return c}();exports.default=l;
},{}],"yntx":[function(require,module,exports) {
"use strict";var e=i(require("/Input")),s=i(require("/CameraManager")),t=i(require("/Graphics")),n=i(require("/Screen"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function a(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,s,t){return s&&a(e.prototype,s),t&&a(e,t),e}var c=function(){function n(){r(this,n),this.ui_elements=[],this._tmp_normalized_pos=new THREE.Vector2,this.ss_scene=new THREE.Scene,this.ss_scene.autoUpdate=!1,this.ss_scene.frustumCulled=!1,this.ws_scene=new THREE.Scene,this.ws_scene.autoUpdate=!1,this.ws_scene.frustumCulled=!1,this.ss_camera=new THREE.OrthographicCamera(-1,1,1,-1,-100,100)}return u(n,[{key:"delete_element",value:function(e){var s=this.ui_elements.indexOf(e);s>-1&&this.ui_elements.splice(s,1),this.ss_scene.remove(e),this.ws_scene.remove(e),e.dispose()}},{key:"add_screen_space_element",value:function(e){this.ui_elements.push(e),this.ss_scene.add(e),e.set_screen_space_coordinate_system()}},{key:"add_world_space_element",value:function(e){this.ui_elements.push(e),this.ws_scene.add(e),e.set_world_space_coordinate_system()}},{key:"update",value:function(){this.ss_camera.updateProjectionMatrix(),this._tmp_normalized_pos.copy(e.default.normalized_mouse_pos);for(var s=0;s<this.ui_elements.length;s++)this.ui_elements[s].update_state(this._tmp_normalized_pos)}},{key:"render",value:function(e){this.ss_scene.children.length>0&&t.default.render(this.ss_scene,this.ss_camera),this.ws_scene.children.length>0&&t.default.render(this.ws_scene,s.default.current)}},{key:"clear",value:function(){this.current_clicked_element=void 0}}]),n}(),_=new c;module.exports=_;
},{"/Input":"k3P6","/CameraManager":"XMgG","/Graphics":"xMH9","/Screen":"JIgx"}],"WHWR":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var _=0;_<e.length;_++){var a=e[_];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _(t,_,a){return _&&e(t.prototype,_),a&&e(t,a),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function e(_,a){t(this,e),this.geometry=_,this.material=void 0,this.uniforms={},this.batch_width=a,this.data_textures=[],this.object_names=void 0,this.zero_offset=new THREE.Vector2,this.write_offset=new THREE.Vector2,this.uniform_dirty_count=0,this.tmp_uploaded_data_count=0}return _(e,[{key:"init",value:function(t,e,_){this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:e,fragmentShader:_}),this.object_names=t}},{key:"add_global_uniform",value:function(t,e){this.uniforms[t]={value:e},this.material.needsUpdate=!0}},{key:"set_global_uniform",value:function(t,e){this.uniforms[t].value=e}},{key:"add_object_uniform_v3",value:function(t,e){var _=this.__create_rgb_texture(this.batch_width),a=this.__create_rgb_texture(this.batch_width),r=this.__create_rgb_texture(1),i=this.__add_data_texture(t,_,a,r);e&&this.__flood_data_texture_rgb(i,e)}},{key:"add_object_uniform_v4",value:function(t,e){var _=this.__create_rgba_texture(this.batch_width),a=this.__create_rgba_texture(this.batch_width),r=this.__create_rgba_texture(1),i=this.__add_data_texture(t,_,a,r);e&&this.__flood_data_texture_rgba(i,e)}},{key:"add_object_uniform_v4_float",value:function(t,e){var _=this.__create_rgba_float_texture(this.batch_width),a=this.__create_rgba_float_texture(this.batch_width),r=this.__create_rgba_float_texture(1),i=this.__add_data_texture(t,_,a,r);e&&this.__flood_data_texture_rgba(i,e)}},{key:"set_object_uniform_v3",value:function(t,e,_,a,r,i){var s=this.__get_object_index(t),u=this.__get_data_texture(e);this.__set_pixel_rgb(u.src,s,_,a,r,i),this.__set_pixel_rgb(u.one_pixel,0,_,a,r,i),u.last_accessed_index=s,u.dirty_count++}},{key:"set_object_uniform_v4",value:function(t,e,_,a,r,i,s){var u=this.__get_object_index(t),n=this.__get_data_texture(e);this.__set_pixel_rgba(n.src,u,_,a,r,i,s),this.__set_pixel_rgba(n.one_pixel,0,_,a,r,i,s),n.last_accessed_index=u,n.dirty_count++}},{key:"upload_texture_data",value:function(t,e){for(var _=0;_<this.data_textures.length;_++)e>0&&this.data_textures[_].dirty_count>0&&(1===this.data_textures[_].dirty_count&&this.__partial_texture_data_upload(t,this.data_textures[_]),this.data_textures[_].dirty_count>1&&this.__full_texture_data_upload(t,this.data_textures[_]),this.data_textures[_].dirty_count=0,e--)}},{key:"get_uniform_dirty_count",value:function(){this.uniform_dirty_count=0;for(var t=0;t<this.data_textures.length;t++)this.data_textures[t].dirty_count>0&&this.uniform_dirty_count++;return this.uniform_dirty_count}},{key:"__full_texture_data_upload",value:function(t,e){e.dst.needsUpdate=!0,t.copyTextureToTexture(this.zero_offset,e.src,e.dst)}},{key:"__partial_texture_data_upload",value:function(t,e){var _=e.last_accessed_index;-1!==_&&(this.write_offset.y=Math.floor(_/this.batch_width),this.write_offset.x=_-this.batch_width*this.write_offset.y,t.copyTextureToTexture(this.write_offset,e.one_pixel,e.dst))}},{key:"get_mesh",value:function(){return new THREE.Mesh(this.geometry,this.material)}},{key:"__set_pixel_rgb",value:function(t,e,_,a,r,i){a&&(t.image.data[3*e+0]=_.x),r&&(t.image.data[3*e+1]=_.y),i&&(t.image.data[3*e+2]=_.z)}},{key:"__set_pixel_rgba",value:function(t,e,_,a,r,i,s){a&&(t.image.data[4*e+0]=_.x),r&&(t.image.data[4*e+1]=_.y),i&&(t.image.data[4*e+2]=_.z),s&&(t.image.data[4*e+3]=_.w)}},{key:"__flood_data_texture_rgb",value:function(t,e){for(var _=0;_<this.batch_width*this.batch_width;_++)this.__set_pixel_rgb(t.src,_,e,!0,!0,!0),t.dirty_count++}},{key:"__flood_data_texture_rgba",value:function(t,e){for(var _=0;_<this.batch_width*this.batch_width;_++)this.__set_pixel_rgba(t.src,_,e,!0,!0,!0,!0),t.dirty_count++}},{key:"__create_rgb_texture",value:function(t){var e=new Uint8Array(3*t*t);return new THREE.DataTexture(e,t,t,THREE.RGBFormat)}},{key:"__create_rgba_texture",value:function(t){var e=new Uint8Array(4*t*t);return new THREE.DataTexture(e,t,t,THREE.RGBAFormat)}},{key:"__create_rgba_float_texture",value:function(t){var e=new Float32Array(4*t*t);return new THREE.DataTexture(e,t,t,THREE.RGBA,THREE.FloatType)}},{key:"__get_data_texture",value:function(t){for(var e=0;e<this.data_textures.length;e++)if(this.data_textures[e].name===t)return this.data_textures[e];conosle.error("Data texture "+t+" does not exist")}},{key:"__get_object_index",value:function(t){for(var e=0;e<this.object_names.length;e++)if(this.object_names[e]===t)return e;console.error("the name "+t+" is not contained in this batch")}},{key:"__add_data_texture",value:function(t,e,_,a){return _.needsUpdate=!0,this.data_textures.push({name:t,src:e,dst:_,one_pixel:a,last_accessed_index:-1,dirty_count:0}),this.uniforms[t]={value:_},this.data_textures[this.data_textures.length-1]}},{key:"dispose",value:function(){for(var t=0;t<this.data_textures.length;t++)this.data_textures[t].src.dispose(),this.data_textures[t].dst.dispose(),this.data_textures[t].one_pixel.dispose()}}]),e}();exports.default=a;
},{}],"VduU":[function(require,module,exports) {
"use strict";var t=e(require("/static_batcher/GeometryBatch"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}var u=function(){function e(){r(this,e),this.batches=[]}return n(e,[{key:"batch",value:function(e){var r=[],a=THREE.Math.ceilPowerOfTwo(Math.sqrt(e.length));this.__init_uv_array(r,a);for(var n=0,u=0;u<e.length;u++)for(var o=e[u].getAttribute("position").count,i=Math.floor(u/a),s=u-a*i,c=0;c<o;c++)r[n]=s/a+.5/a,r[n+1]=i/a+.5/a,n+=2;var f=new THREE.BufferAttribute(new Float32Array(r),2),h=THREE.BufferGeometryUtils.mergeBufferGeometries(e);return h.setAttribute("attr_accessor_uv",f),this.batches.push(new t.default(h,a)),this.batches[this.batches.length-1]}},{key:"upload_texture_data",value:function(t){for(var e=0;e<this.batches.length;e++)this.batches[e].upload_texture_data(t,1)}},{key:"__init_uv_array",value:function(t,e){for(var r=0;r<e*e*2;r++)t.push(0)}}]),e}(),o=new u;module.exports=o;
},{"/static_batcher/GeometryBatch":"WHWR"}],"QYq1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("/Time")),t=s(require("/Input")),r=s(require("/UI")),a=s(require("/Debug")),i=s(require("/static_batcher/GeometryBatcher")),n=s(require("/BaseApplication"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var l=function(){function i(e,t){u(this,i),e=e||new n.default,this._frame_id=-1,this.target_application=e,this.renderer=t,this.is_running=!0,this.frames_passed=0}return d(i,[{key:"update",value:function(){this.is_running&&(e.default.__update(),a.default.clear(),5===this.frames_passed&&this.target_application.post_start(),this.target_application.update(),this.target_application.on_pre_render(),this.renderer.update(),r.default.update(),r.default.render(this.renderer),this.target_application.on_post_render(),a.default.rt_debug&&this.renderer.blit(a.default.rt_debug),t.default.clear(),r.default.clear(),this._frame_id=requestAnimationFrame(this.update.bind(this)),this.frames_passed++)}},{key:"start",value:function(){this.target_application.start(),this.update(),this.is_running=!0}},{key:"stop",value:function(){this.is_running=!1,this.target_application.end(),cancelAnimationFrame(this._frame_id)}}]),i}();exports.default=l;
},{"/Time":"wewU","/Input":"k3P6","/UI":"yntx","/Debug":"J9UP","/static_batcher/GeometryBatcher":"VduU","/BaseApplication":"v0GF"}],"mqLz":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function r(t,n){e(this,r),this.progress=0,this.resource_id=t,this.url=n,this.has_finished=!1,this.has_error=!1,this.error_message="none"}return t(r,[{key:"__update_progress",value:function(e){this.progress=e}},{key:"__loading_ended",value:function(){this.has_finished=!0}},{key:"__set_error",value:function(e){this.has_error=!0,this.error_message=e}},{key:"print_error",value:function(){console.error("Error while loading "+this.resource_id+"\n\t path: "+this.url+"\n\t\t"+this.error_message)}},{key:"load",value:function(e){}}]),r}();exports.default=n;
},{}],"ged4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/resource_loader/AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(n,t.default);var r=f(n);function n(t,e){var u;return o(this,n),(u=r.call(this,t,e)).loader=new THREE.TextureLoader,u}return u(n,[{key:"load",value:function(t){var e=this;this.loader.load(this.url,function(r){t.set_resource(e.resource_id,r),e.__update_progress(1),e.__loading_ended()},void 0,function(){e.__set_error("Image could not  be loaded. Maybe wrong name or path, I don't know\\_()_/"),e.__loading_ended()})}}]),n}();exports.default=y;
},{"/resource_loader/AbstractLoader":"mqLz"}],"DPLo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/resource_loader/AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){c(o,t.default);var r=f(o);function o(t,e){var u;return n(this,o),(u=r.call(this,t,e)).loader=new THREE.GLTFLoader,u}return u(o,[{key:"load",value:function(t){var e=this;this.loader.load(this.url,function(r){t.set_resource(e.resource_id,r),e.__update_progress(1),e.__loading_ended()},function(t){e.__update_progress(t.loaded/t.total)},function(t){e.__set_error(t+"\n\n\t If the error says something about unexpected token < in JSON then the probably the problem is related to the file not being found. Check the name and path of the resource"),e.__loading_ended()})}}]),o}();exports.default=d;
},{"/resource_loader/AbstractLoader":"mqLz"}],"k6LD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/resource_loader/AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){c(n,t.default);var r=f(n);function n(t,e){var u;return o(this,n),(u=r.call(this,t,e)).loader=new THREE.ColladaLoader,u}return u(n,[{key:"load",value:function(t){var e=this;this.loader.load(this.url,function(r){t.set_resource(e.resource_id,r),e.__update_progress(1),e.__loading_ended()},function(t){e.__update_progress(t.loaded/t.total)},function(t){e.__set_error(t+"\n\n\t If the error says something about unexpected token < in JSON then the probably the problem is related to the file not being found. Check the name and path of the resource"),e.__loading_ended()})}}]),n}();exports.default=d;
},{"/resource_loader/AbstractLoader":"mqLz"}],"X88z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/resource_loader/AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(n,t.default);var r=f(n);function n(t,e){var u;return o(this,n),(u=r.call(this,t,e)).loader=new THREE.FileLoader,u}return u(n,[{key:"load",value:function(t){var e=this;this.loader.load(this.url,function(r){t.set_resource(e.resource_id,r),e.__update_progress(1),e.__loading_ended()},function(t){e.__update_progress(t.loaded/t.total)},function(t){e.__set_error(t),e.__loading_ended()})}}]),n}();exports.default=y;
},{"/resource_loader/AbstractLoader":"mqLz"}],"jYGB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/resource_loader/AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(o,t.default);var r=f(o);function o(t,e){var u;return n(this,o),(u=r.call(this,t,e)).loader=new THREE.CubeTextureLoader,u.loader.setPath(e+"/"),u.urls=["px.png","nx.png","py.png","ny.png","pz.png","nz.png"],u}return u(o,[{key:"load",value:function(t){var e=this;this.loader.load(this.urls,function(r){t.set_resource(e.resource_id,r),e.__update_progress(1),e.__loading_ended()},void 0,function(t){e.__set_error("Image could not  be loaded. Maybe wrong name or path, I don't know\\_()_/",t),e.__loading_ended()})}}]),o}();exports.default=y;
},{"/resource_loader/AbstractLoader":"mqLz"}],"w983":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("/resource_loader/AbstractLoader"));function t(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return function(){var t,o=p(e);if(s()){var r=p(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return l(this,t)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(t){i(n,e.default);var o=f(n);function n(e,t,u,i,c){var f;return r(this,n),(f=o.call(this,e,t)).loader=new THREE.AudioLoader,f.loop=i,f.listener=u,f.voluem=c,f}return u(n,[{key:"load",value:function(e){var t=this,o=this,r=new THREE.Audio(this.listener);this.loader.load(this.url,function(n){r.setBuffer(n),r.setLoop(t.loop),r.setVolume(t.voluem),e.set_resource(o.resource_id,r),e.get_resource("audio_listener")||e.set_resource("audio_listener",t.listener),o.__update_progress(1),o.__loading_ended()},void 0,function(e){o.__set_error("Audio could not be loaded. Maybe wrong name or path, I don't know\\_()_/",e),o.__loading_ended()})}}]),n}();exports.default=d;
},{"/resource_loader/AbstractLoader":"mqLz"}],"NvAk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/resource_loader/AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return function(){var e,r=p(t);if(l()){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(e){i(n,t.default);var r=s(n);function n(t,e,u,i){var c;return o(this,n),(c=r.call(this,t,e)).loader=new THREE.FileLoader,c.username=u,c.password=i,c.resource_container=void 0,c}return u(n,[{key:"load",value:function(t){var e={};this.resource_container=t,void 0!==this.username&&void 0!==this.password&&(e.Authorization="Basic ".concat(btoa("".concat(this.username,":").concat(this.password)))),fetch(this.url,{headers:e}).then(this.__parse_to_json.bind(this)).then(this.__set_resource.bind(this))}},{key:"__parse_to_json",value:function(t){return t.json()}},{key:"__set_resource",value:function(t){this.resource_container.set_resource(this.resource_id,t),this.__update_progress(1),this.__loading_ended()}}]),n}();exports.default=_;
},{"/resource_loader/AbstractLoader":"mqLz"}],"tM6y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/resource_loader/AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){c(o,t.default);var r=f(o);function o(t,e){var u;return n(this,o),(u=r.call(this,t,e)).loader=new THREE.OBJLoader,u}return u(o,[{key:"load",value:function(t){var e=this;this.loader.load(this.url,function(r){t.set_resource(e.resource_id,r),e.__update_progress(1),e.__loading_ended()},function(t){e.__update_progress(t.loaded/t.total)},function(t){e.__set_error(t+"\n\n\t If the error says something about unexpected token < in JSON then probably the problem is related to the file not being found. Check the name and path of the resource"),e.__loading_ended()})}}]),o}();exports.default=d;
},{"/resource_loader/AbstractLoader":"mqLz"}],"cO40":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(o,t.default);var r=f(o);function o(t,e){var u;return n(this,o),(u=r.call(this,t,e)).loader=new THREE.RGBELoader,u.loader.setDataType(THREE.UnsignedByteType),u}return u(o,[{key:"load",value:function(t){var e=this;this.loader.load(this.url,function(r){t.set_resource(e.resource_id,r),e.__update_progress(1),e.__loading_ended()},function(t){e.__update_progress(t.loaded/t.total)},function(t){e.__set_error(t+"\n\n\t If the error says something about unexpected token < in JSON then the probably the problem is related to the file not being found. Check the name and path of the resource"),e.__loading_ended()})}}]),o}();exports.default=y;
},{"./AbstractLoader":"mqLz"}],"cNL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/resource_loader/AbstractLoader"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return function(){var e,r=p(t);if(s()){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return f(this,e)}}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(n,t.default);var r=a(n);function n(t,e){var u;return o(this,n),(u=r.call(this,t,e)).loader=new THREE.FileLoader,u}return u(n,[{key:"load",value:function(t){var e=this;this.loader.load(this.url,function(r){t.set_resource(e.resource_id,e.parse_path(r)),e.__update_progress(1),e.__loading_ended()},function(t){e.__update_progress(t.loaded/t.total)},function(t){e.__set_error(t),e.__loading_ended()})}},{key:"parse_path",value:function(t){var e=t.split("\n");""===e[e.length-1]&&e.pop();for(var r=[],o=0;o<e.length;o+=3){var n=parseFloat(e[o+0]),u=parseFloat(e[o+1]),c=parseFloat(e[o+2]);r.push(new THREE.Vector3(n,u,c))}return r}}]),n}();exports.default=y;
},{"/resource_loader/AbstractLoader":"mqLz"}],"HJ6F":[function(require,module,exports) {
"use strict";var e=r(require("/EventManager"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function u(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var o=function(){function r(){n(this,r),this.resources={}}return u(r,[{key:"set_resource",value:function(r,n){this.resources[r]=n,e.default.fire_resource_loaded({name:r,value:n})}},{key:"get_resource",value:function(e){return this.resources[e]}},{key:"get",value:function(e){return this.resources[e]}}]),r}(),a=new o;module.exports=a;
},{"/EventManager":"pJqg"}],"gkjv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("/resource_loader/TextureLoader")),r=c(require("/resource_loader/GLTFLoader")),o=c(require("/resource_loader/DAELoader")),u=c(require("/resource_loader/TextLoader")),a=c(require("/resource_loader/CubemapLoader")),s=c(require("/resource_loader/AudioLoader")),t=c(require("/resource_loader/JSONLoader")),d=c(require("/resource_loader/OBJLoader")),n=c(require("/resource_loader/RGBETextureLoader")),l=c(require("/resource_loader/PointArrayLoader")),i=c(require("/ResourceContainer"));function c(e){return e&&e.__esModule?e:{default:e}}function _(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function h(e,r){for(var o=0;o<r.length;o++){var u=r[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function f(e,r,o){return r&&h(e.prototype,r),o&&h(e,o),e}var p=function(){function c(e){_(this,c),this.resource_loaders=[],this.batch_name=e||"unnamed batch"}return f(c,[{key:"add_texture",value:function(r,o){this.resource_loaders.push(new e.default(r,o))}},{key:"add_gltf",value:function(e,o){this.resource_loaders.push(new r.default(e,o))}},{key:"add_dae",value:function(e,r){this.resource_loaders.push(new o.default(e,r))}},{key:"add_obj",value:function(e,r){this.resource_loaders.push(new d.default(e,r))}},{key:"add_text",value:function(e,r){this.resource_loaders.push(new u.default(e,r))}},{key:"add_cubemap",value:function(e,r){this.resource_loaders.push(new a.default(e,r))}},{key:"add_audio",value:function(e,r,o,u,a){this.resource_loaders.push(new s.default(e,r,o,u,a))}},{key:"add_json",value:function(e,r,o,u){this.resource_loaders.push(new t.default(e,r,o,u))}},{key:"add_point_array",value:function(e,r){this.resource_loaders.push(new l.default(e,r))}},{key:"add_hdr",value:function(e,r){this.resource_loaders.push(new n.default(e,r))}},{key:"load",value:function(e){for(var r=0;r<this.resource_loaders.length;r++)this.resource_loaders[r].load(e||i.default)}},{key:"print_errors",value:function(){console.error("Batch <"+this.batch_name+"> could not load successfully");for(var e=0;e<this.resource_loaders.length;e++)this.resource_loaders[e].has_error&&this.resource_loaders[e].print_error()}},{key:"get_progress",value:function(){for(var e=0,r=0;r<this.resource_loaders.length;r++)e+=this.resource_loaders[r].progress;return e/this.resource_loaders.length}},{key:"loading_finished",get:function(){for(var e=!0,r=0;r<this.resource_loaders.length;r++)e=e&&this.resource_loaders[r].has_finished;return e}},{key:"has_errors",get:function(){for(var e=!1,r=0;r<this.resource_loaders.length;r++)e=e||this.resource_loaders[r].has_error;return e}}]),c}();exports.default=p;
},{"/resource_loader/TextureLoader":"ged4","/resource_loader/GLTFLoader":"DPLo","/resource_loader/DAELoader":"k6LD","/resource_loader/TextLoader":"X88z","/resource_loader/CubemapLoader":"jYGB","/resource_loader/AudioLoader":"w983","/resource_loader/JSONLoader":"NvAk","/resource_loader/OBJLoader":"tM6y","/resource_loader/RGBETextureLoader":"cO40","/resource_loader/PointArrayLoader":"cNL4","/ResourceContainer":"HJ6F"}],"wwEn":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function t(){e(this,t)};exports.default=t;
},{}],"XAIA":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function t(){e(this,t)}return n(t,null,[{key:"get_image_data",value:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height)}},{key:"get_pixel",value:function(e,t,n){var a=4*(t+e.width*n),r=e.data;return new THREE.Vector4(r[a+0],r[a+1],r[a+2],r[a+3])}}]),t}();exports.default=a;
},{}],"c2tY":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModelUtilities=void 0;var o=function(){function n(){e(this,n)}return t(n,[{key:"get_mesh",value:function(e,n){e.traverse(function(e){e instanceof THREE.Mesh&&(e.geometry instanceof THREE.Geometry&&(e.geometry=(new THREE.BufferGeometry).fromGeometry(e.geometry)),n(e))})}},{key:"get_geometries",value:function(e){var n=[];return this.get_mesh(e,function(e){n.push(e.geometry)}),n}},{key:"assign_material",value:function(e,n,t){e.traverse(function(e){e instanceof THREE.Mesh&&(void 0===t?e.material=n:e.name===t&&(e.material=n))})}},{key:"clone_animated_gltf",value:function(e){var n={animations:e.animations,scene:e.scene.clone(!0)},t={};e.scene.traverse(function(e){e.isSkinnedMesh&&(t[e.name]=e)});var o={},r={};for(var a in n.scene.traverse(function(e){e.isBone&&(o[e.name]=e),e.isSkinnedMesh&&(r[e.name]=e)}),t){for(var i=t[a].skeleton,s=r[a],u=[],c=0;c<i.bones.length;++c){var f=o[i.bones[c].name];u.push(f)}s.bind(new THREE.Skeleton(u,i.boneInverses),s.matrixWorld)}return n}},{key:"set_shadow_config",value:function(e,n,t){e.traverse(function(e){e instanceof THREE.Mesh&&(e.castShadow=n,e.receiveShadow=t)})}},{key:"__find_object",value:function(e,n,t){e.traverse(function(e){e.name===n&&t(e)})}},{key:"get_object",value:function(e,n){var t=void 0;return e.traverse(function(e){e.name===n&&(t=e)}),t}},{key:"get_object_by_type",value:function(e,n){var t=void 0;return e.traverse(function(e){e.constructor.name===n&&(t=e)}),t}}]),n}();exports.ModelUtilities=o;var r=new o;module.exports=r;
},{}],"bOug":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function n(){e(this,n)}return t(n,null,[{key:"is_int",value:function(e){return Number(e)===e&&e%1==0}},{key:"is_float",value:function(e){return Number(e)===e&&e%1!=0}},{key:"is_json",value:function(e){try{JSON.parse(e)}catch(n){return!1}return!0}}]),n}();exports.default=r;
},{}],"dxG8":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform vec3 _Color;\n\nvarying vec3 vBarycentric;\n\nfloat edgeFactor(vec3 baryc ){\n    vec3 d = fwidth(baryc);\n    vec3 a3 = smoothstep(vec3(0.0), d*1.5, baryc);\n    return min(min(a3.x, a3.y), a3.z);\n}\n\nvoid main()\n{\t\n\tfloat alpha = edgeFactor(vBarycentric + vec3(1. , 1., 0.));\n\tgl_FragColor.rgb = mix(_Color, vec3(0.), alpha);\n\tgl_FragColor.a = 1.0 - alpha;\n\tgl_FragColor.a *= 0.2;\n}";
},{}],"WMaX":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nattribute vec3 barycentric;\nvarying vec3 vBarycentric;\nvoid main()\n{\n\n  mat4 VP = projectionMatrix * viewMatrix;\n  vec3 pos = (modelMatrix * vec4(position, 1.0)).xyz;\n  gl_Position = VP * vec4(pos, 1.0);\n  vBarycentric = barycentric;\n}";
},{}],"LEA3":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var r=0;r<e.length;r++){var u=e[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function r(t,r,u){return r&&e(t.prototype,r),u&&e(t,u),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function e(){t(this,e)}return r(e,null,[{key:"convert_to_non_indexed_geometry",value:function(t){for(var r=t.index,u=t.getAttribute("position"),a=[],n=[],s=0;s<r.count;s+=3)n.push(u.getX(r.array[s+0])),n.push(u.getY(r.array[s+0])),n.push(u.getZ(r.array[s+0])),a.push(1),a.push(0),a.push(0),n.push(u.getX(r.array[s+1])),n.push(u.getY(r.array[s+1])),n.push(u.getZ(r.array[s+1])),a.push(0),a.push(1),a.push(0),n.push(u.getX(r.array[s+2])),n.push(u.getY(r.array[s+2])),n.push(u.getZ(r.array[s+2])),a.push(0),a.push(0),a.push(1);var o=new THREE.BufferGeometry;return o.setAttribute("position",new THREE.BufferAttribute(new Float32Array(n),3)),e.add_barycentric_attribute(o),o}},{key:"add_barycentric_attribute",value:function(t){for(var e=[],r=t.getAttribute("position"),u=0;u<r.count;u+=3)e.push(1),e.push(0),e.push(0),e.push(0),e.push(1),e.push(0),e.push(0),e.push(0),e.push(1);t.setAttribute("barycentric",new THREE.BufferAttribute(new Float32Array(e),3))}}]),e}();exports.default=u;
},{}],"rXwc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("/shaders/grid/grid_frag")),e=n(require("/shaders/grid/grid_vert")),r=n(require("/utilities/GeometryUtilities"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return function(){var e,r=p(t);if(l()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(n){i(f,THREE.Mesh);var o=c(f);function f(){var n;u(this,f);var i=new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Color("#919191")}},vertexShader:e.default,fragmentShader:t.default,extensions:{derivatives:!0},transparent:!0,depthWrite:!1}),c=new THREE.PlaneBufferGeometry(100,100,100,100),a=r.default.convert_to_non_indexed_geometry(c);return(n=o.call(this,a,i)).rotation.x=-1.57,n}return f}();exports.default=y;
},{"/shaders/grid/grid_frag":"dxG8","/shaders/grid/grid_vert":"WMaX","/utilities/GeometryUtilities":"LEA3"}],"wMgF":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform vec2 _ScreenSize;\nuniform vec2 _TextureSize;\nuniform vec2 _PixelOffset;\nuniform vec3 _NDC;\nuniform vec2 _PivotPoint;\nuniform float _DepthOffset;\nvarying vec2 vUv;\n\nvec2 add_pixel_offset(vec2 pos)\n{\n\tpos = pos * 0.5 + 0.5;\n\tpos *= _ScreenSize;\n\tpos = ceil(pos+_PixelOffset)+0.5;\n\tpos /= _ScreenSize;\n\treturn pos * 2.0 - 1.0;\n}\nvoid main()\n{\n\tvec4 projected_pos = projectionMatrix * viewMatrix * vec4(_NDC, 1.0);\n  projected_pos.zw += _DepthOffset;\n\n\tprojected_pos.xyz /= projected_pos.w;\n\n  vec2 normalized_size = _TextureSize/_ScreenSize;\n  vec2 dir = uv * 2.0 - 1.0;\n  dir -= _PivotPoint;\n  vec2 pos = projected_pos.xy+dir * normalized_size;\n  gl_Position = vec4(add_pixel_offset(pos), projected_pos.z, 1.0);\n  vUv = uv;\n\n}\n";
},{}],"zYpx":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex;\nuniform vec2 _ScreenSize;\nuniform vec2 _TextureSize;\nvarying vec2 vUv;\n\nvoid main()\n{\n\tgl_FragColor = texture2D(_MainTex, vUv + vec2(0.5, 0.5)/_TextureSize);\n}\n";
},{}],"F8cc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("/shaders/ui_element/ui_element.vert")),t=n(require("/shaders/ui_element/ui_element.frag")),r=n(require("/materials/BaseShaderMaterial"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return function(){var t,r=p(e);if(s()){var n=p(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return a(this,t)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(n){i(c,r.default);var o=f(c);function c(){var r;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u(this,c),(r=o.call(this,e.default,t.default,{_MainTex:{value:void 0},_ScreenSize:{value:new THREE.Vector2(Screen.width,Screen.height)},_TextureSize:{value:new THREE.Vector2},_PixelOffset:{value:new THREE.Vector2(0,0)},_NDC:{value:new THREE.Vector3},_PivotPoint:{value:new THREE.Vector2},_DepthOffset:{value:0}})).transparent=!0,r.depthWrite=!1,r.depthTest=!1,r}return c}();exports.default=y;
},{"/shaders/ui_element/ui_element.vert":"wMgF","/shaders/ui_element/ui_element.frag":"zYpx","/materials/BaseShaderMaterial":"Ej2H"}],"HZsS":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex;\nuniform vec2 _ScreenSize;\nuniform vec2 _TextureSize;\nvarying vec2 vUv;\n\nvoid main()\n{\n\tgl_FragColor = texture2D(_MainTex, vUv + vec2(0.5, 0.5)/_TextureSize);\n}";
},{}],"Spsq":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform vec2 _ScreenSize;\nuniform vec2 _TextureSize;\nuniform vec2 _PixelOffset;\nuniform vec3 _NDC;\nuniform vec2 _PivotPoint;\nuniform float _DepthOffset;\nvarying vec2 vUv;\n\nvec2 round_to_ceil(vec2 pos)\n{\n\tpos = pos * 0.5 + 0.5;\n\tpos *= _ScreenSize;\n\tpos = ceil(pos)+0.5;\n\tpos /= _ScreenSize;\n\treturn pos * 2.0 - 1.0;\n}\nvoid main()\n{\n\tvec4 projected_pos = projectionMatrix * viewMatrix * vec4(_NDC, 1.0);\n  projected_pos.zw += _DepthOffset;\n\n\tprojected_pos.xyz /= projected_pos.w;\n\t\n  vec2 normalized_size = _TextureSize/_ScreenSize;\n  vec2 dir = uv * 2.0 - 1.0;\n  dir -= _PivotPoint; \n  vec2 pos = projected_pos.xy+ dir * normalized_size;\n  gl_Position = vec4(round_to_ceil(pos), projected_pos.z, 1.0);\n  vUv = uv;\n\n}";
},{}],"GMfh":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function t(){e(this,t),this.tmp_vec=new THREE.Vector2}return n(t,[{key:"get_pos_NDC",value:function(e){return this.tmp_vec.set(e.x,e.y)}}]),t}();exports.default=r;
},{}],"zIq8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("/CameraManager"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var c=function(){function t(){r(this,t),this.tmp_vec3=new THREE.Vector3,this.tmp_vec2=new THREE.Vector2}return o(t,[{key:"get_pos_NDC",value:function(t){return this.tmp_vec3.copy(t),this.tmp_vec3.project(e.default.current),this.tmp_vec2.set(this.tmp_vec3.x,this.tmp_vec3.y)}}]),t}();exports.default=c;
},{"/CameraManager":"XMgG"}],"ZBbQ":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function n(){e(this,n)}return t(n,[{key:"update",value:function(e,n){}},{key:"on_enter",value:function(e){}},{key:"on_exit",value:function(e){}}]),n}();exports.default=o;
},{}],"XKzP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/ui/ui_element_state/UIElementState"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){return function(){var e,n=p(t);if(s()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(o,t.default);var n=i(o);function o(){return r(this,o),n.call(this)}return u(o,[{key:"update",value:function(t,e){t.is_mouse_over(e)&&t.set_state(t._on_enter_state)}}]),o}();exports.default=y;
},{"/ui/ui_element_state/UIElementState":"ZBbQ"}],"Ow46":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/ui/ui_element_state/UIElementState"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,n=p(t);if(s()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(o,t.default);var n=f(o);function o(){return r(this,o),n.call(this)}return u(o,[{key:"on_enter",value:function(t){t.on_mouse_enter()}},{key:"update",value:function(t,e){t.is_mouse_over(e)?t.set_state(t._on_hover_state):t.set_state(t._on_exit_state)}}]),o}();exports.default=y;
},{"/ui/ui_element_state/UIElementState":"ZBbQ"}],"Eg4K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/ui/ui_element_state/UIElementState"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,n=p(t);if(s()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){c(o,t.default);var n=f(o);function o(){return r(this,o),n.call(this)}return u(o,[{key:"on_enter",value:function(t){t.on_mouse_exit(),t.set_state(t._on_idle_state)}}]),o}();exports.default=y;
},{"/ui/ui_element_state/UIElementState":"ZBbQ"}],"SPP6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/ui/ui_element_state/UIElementState"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,n=p(t);if(s()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){i(o,t.default);var n=f(o);function o(){return r(this,o),n.call(this)}return u(o,[{key:"on_enter",value:function(t){this.__trigger_on_hover(t)}},{key:"update",value:function(t,e){t.is_mouse_over(e)?this.__trigger_on_hover(t):t.set_state(t._on_exit_state)}},{key:"__trigger_on_hover",value:function(t){t.on_mouse_hover()}}]),o}();exports.default=y;
},{"/ui/ui_element_state/UIElementState":"ZBbQ"}],"IBEu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("/UI")),t=f(require("/CameraManager")),i=f(require("/Screen")),n=f(require("/materials/UIElementMaterial")),o=f(require("/shaders/ui/ss_texture_frag")),r=f(require("/shaders/ui/ss_texture_vert")),s=f(require("/ui/ui_element_position/ScreenSpacePosition")),u=f(require("/ui/ui_element_position/WorldSpacePosition")),a=f(require("/ui/ui_element_state/OnIdle")),_=f(require("/ui/ui_element_state/OnMouseEnter")),c=f(require("/ui/ui_element_state/OnMouseExit")),l=f(require("/ui/ui_element_state/OnMouseHover"));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,i){return t&&y(e.prototype,t),i&&y(e,i),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return function(){var t,i=b(e);if(g()){var n=b(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return w(this,t)}}function w(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){d(o,THREE.Mesh);var t=x(o);function o(e,i){var r;return h(this,o),(r=t.call(this,new THREE.PlaneGeometry(1,1),new n.default)).is_clickable=!1,r.position_strategy=new u.default,r.current_state=new a.default,r._position=new THREE.Vector3,r._on_idle_state=new a.default,r._on_enter_state=new _.default,r._on_exit_state=new c.default,r._on_hover_state=new l.default,r.on_enter=void 0,r.on_exit=void 0,r.on_hover=void 0,r.mouse_pos_tmp=new THREE.Vector2,r.cached_NDC_position=new THREE.Vector2,r.screen_pos_tmp=new THREE.Vector2,r.texture_size=new THREE.Vector2(1,1),r.frustumCulled=!1,r.matrixAutoUpdate=!1,r.renderOrder=0,r.size=1,r.pixel_offset=new THREE.Vector2,r}return m(o,[{key:"set_render_order",value:function(e){this.renderOrder=e}},{key:"set_pixel_offset",value:function(e){this.pixel_offset.copy(e),this.material.uniforms._PixelOffset.value.copy(e)}},{key:"set_state",value:function(e){this.current_state.on_exit(this),this.current_state=e,this.current_state.on_enter(this)}},{key:"clear_state",value:function(){this.visible=!1}},{key:"set_world_space_coordinate_system",value:function(){this.position_strategy=new u.default}},{key:"set_screen_space_coordinate_system",value:function(){this.position_strategy=new s.default}},{key:"set_texture",value:function(e){e.minFilter=THREE.NearestFilter,e.magFilter=THREE.NearestFilter,e.needsUpdate=!0,this.texture_size.set(e.image.width,e.image.height),this.material.uniforms._MainTex.value=e,this.get_size(this.material.uniforms._TextureSize.value),this.visible=!0}},{key:"update_state",value:function(e){this.material.uniforms._ScreenSize.value.set(i.default.width,i.default.height),this.get_size(this.material.uniforms._TextureSize.value),this.cached_NDC_position.copy(this.position_strategy.get_pos_NDC(this.position)),this.material.uniforms._NDC.value.copy(this.position),this.current_state.update(this,e)}},{key:"is_mouse_over",value:function(e){this.screen_pos_tmp.copy(this.cached_NDC_position),this.to_screen_position(this.screen_pos_tmp),this.screen_pos_tmp.x+=this.pixel_offset.x,this.screen_pos_tmp.y+=this.pixel_offset.y;var t=(new THREE.Box2).setFromCenterAndSize(this.screen_pos_tmp,this.get_size());return this.mouse_pos_tmp.copy(e),this.to_screen_position(this.mouse_pos_tmp),t.containsPoint(this.mouse_pos_tmp)}},{key:"to_screen_position",value:function(e){e.x=(.5*e.x+.5)*i.default.width+this.pixel_offset.x,e.y=(.5*e.y+.5)*i.default.height+this.pixel_offset.y}},{key:"get_screen_space_position",value:function(){var e=this.cached_NDC_position.clone();return this.to_screen_position(e),e}},{key:"set_screen_space_position",value:function(e){this.position.x=e.x/i.default.width*2-1,this.position.y=e.y/i.default.height*2-1}},{key:"dispose",value:function(){this.material.uniforms._MainTex.value&&this.material.uniforms._MainTex.value.dispose(),i.default.remove_screen_material(this.material),this.geometry.dispose(),this.material.dispose()}},{key:"get_size",value:function(e){return e?e.copy(this.texture_size).multiplyScalar(this.size/i.default.dpr):(new THREE.Vector2).copy(this.texture_size).multiplyScalar(this.size/i.default.dpr)}},{key:"on_mouse_enter",value:function(){}},{key:"on_mouse_exit",value:function(){}},{key:"on_mouse_hover",value:function(){}},{key:"pivot_point",get:function(){return this.material.uniforms._PivotPoint.value}},{key:"position",get:function(){return this._position}},{key:"use_depth",set:function(e){this.material.depthTest=e}},{key:"depth_offset",set:function(e){this.material.uniforms._DepthOffset.value=e}}]),o}();exports.default=k;
},{"/UI":"yntx","/CameraManager":"XMgG","/Screen":"JIgx","/materials/UIElementMaterial":"F8cc","/shaders/ui/ss_texture_frag":"HZsS","/shaders/ui/ss_texture_vert":"Spsq","/ui/ui_element_position/ScreenSpacePosition":"GMfh","/ui/ui_element_position/WorldSpacePosition":"zIq8","/ui/ui_element_state/OnIdle":"XKzP","/ui/ui_element_state/OnMouseEnter":"Ow46","/ui/ui_element_state/OnMouseExit":"Eg4K","/ui/ui_element_state/OnMouseHover":"SPP6"}],"uwzL":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform float _Thickness;\n\nattribute vec3 next_position;\nattribute vec3 previous_position;\nattribute float orientation;\nattribute float coverage;\n\nvarying float line_coverage;\nvarying float uv_u;\n\nvec3 w_space_normal(vec3 from, vec3 to)\n{\n  vec3 w_from = (modelMatrix * vec4(from, 1.0)).xyz;\n  vec3 w_to   = (modelMatrix * vec4(to, 1.0)).xyz;\n\n  vec3 z = normalize(w_to - w_from);\n  return normalize(cross(z , normalize(cameraPosition - w_from)));\n\n}\n\nvoid main()\n{\n\n  mat4 VP = projectionMatrix * viewMatrix;\n\n  vec3 pos = position;\n  vec3 normal = w_space_normal(next_position ,previous_position);\n  pos = (modelMatrix * vec4(pos, 1.0)).xyz;\n  pos += normal * (_Thickness * 0.5) * orientation;\n\n  gl_Position = VP * vec4(pos, 1.0);\n\n  line_coverage = coverage;\n  uv_u = orientation * 0.5 + 0.5;\n\n}";
},{}],"f148":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform float _Length;\nuniform float _ElapsedTime;\nuniform float _Thickness;\nuniform vec3  _Color;\n\nvarying float line_coverage;\nvarying float uv_u;\n\nfloat aastep(float threshold, float value) {\n  #ifdef GL_OES_standard_derivatives\n    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;\n    return smoothstep(threshold-afwidth, threshold+afwidth, value);\n  #else\n    return step(threshold, value);\n  #endif  \n}\n\nvoid main()\n{\n\n    // float y = fract(line_coverage /_Thickness - _TrueElapsedTime) ;\n\n    // vec2 uv = vec2(uv_u, y);\n\n   \n    // vec4 col = texture2D(_ArrowsTex,uv);\n    // col.rgb *= _ForwardColor;\n    // col.a = aastep(0.5, col.a);\n    // gl_FragColor = col;\n    float u = (1.0 - abs(uv_u * 2.0 - 1.0));\n    float diffuse = dot(vec2(u, u), vec2(0.0, 1.0)) * 0.5+0.5;\n    gl_FragColor = vec4(_Color * diffuse, 1.0);\n\n}";
},{}],"BhSJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/shaders/basic_line/basic_line_vert")),e=r(require("/shaders/basic_line/basic_line_frag"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return function(){var e,r=h(t);if(f()){var n=h(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return p(this,e)}}function p(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(r){s(i,THREE.Mesh);var n=l(i);function i(r){var u;o(this,i);var s=new THREE.BufferGeometry;s.setAttribute("position",new THREE.BufferAttribute(new Float32Array([]),3)),s.setAttribute("next_position",new THREE.BufferAttribute(new Float32Array([]),3)),s.setAttribute("previous_position",new THREE.BufferAttribute(new Float32Array([]),3)),s.setAttribute("orientation",new THREE.BufferAttribute(new Float32Array([]),1)),s.setAttribute("coverage",new THREE.BufferAttribute(new Float32Array([]),1));var a=new THREE.ShaderMaterial({uniforms:{_Thickness:{value:.2},_Length:{value:0},_ElapsedTime:{value:0},_Color:{value:new THREE.Color("#FF0000")}},vertexShader:t.default,fragmentShader:e.default,transparent:!0,depthWrite:!1,extensions:{derivatives:!0}});return u=n.call(this,s,a),r&&u.setup(r),u}return u(i,[{key:"setup",value:function(t){for(var e=[],r=[],n=[],o=[],i=[],u=0,s=0;s<t.length;s++){e.push(t[s].x),e.push(t[s].y),e.push(t[s].z),o.push(1),e.push(t[s].x),e.push(t[s].y),e.push(t[s].z),o.push(-1);var a=this.__get_next_position(t,s);r.push(a.x),r.push(a.y),r.push(a.z),r.push(a.x),r.push(a.y),r.push(a.z);var l=this.__get_previous_position(t,s);n.push(l.x),n.push(l.y),n.push(l.z),n.push(l.x),n.push(l.y),n.push(l.z),s<t.length-1&&(u+=t[s].distanceTo(a)),i.push(u),i.push(u)}for(var p=new Float32Array(e),c=new Float32Array(r),f=new Float32Array(n),h=new Float32Array(o),y=new Float32Array(i),b=[],_=0;_<(p.length/3-2)/2;_++){var g=2*_+1;b.push(g),b.push(g+1),b.push(g-1),b.push(g),b.push(g+2),b.push(g+1)}this.geometry.setIndex(b),this.geometry.getAttribute("position").copy(new THREE.BufferAttribute(p,3)),this.geometry.getAttribute("next_position").copy(new THREE.BufferAttribute(c,3)),this.geometry.getAttribute("previous_position").copy(new THREE.BufferAttribute(f,3)),this.geometry.getAttribute("orientation").copy(new THREE.BufferAttribute(h,1)),this.geometry.getAttribute("coverage").copy(new THREE.BufferAttribute(y,1)),this.geometry.getAttribute("position").needsUpdate=!0,this.geometry.getAttribute("next_position").needsUpdate=!0,this.geometry.getAttribute("previous_position").needsUpdate=!0,this.geometry.getAttribute("orientation").needsUpdate=!0,this.geometry.getAttribute("coverage").needsUpdate=!0,this.material.uniforms._Length.value=u,this._length=u}},{key:"__get_previous_position",value:function(t,e){return 0===e?t[1].clone().sub(t[0]).multiplyScalar(-1).add(t[0]):t[e-1]}},{key:"__get_next_position",value:function(t,e){return e===t.length-1?t[t.length-2].clone().sub(t[t.length-1]).multiplyScalar(-1).add(t[t.length-1]):t[e+1]}},{key:"update",value:function(){}},{key:"distance",value:function(){return this.accumulated_length}},{key:"total_length",value:function(){return this.accumulated_length}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.parent&&this.parent.remove(this)}},{key:"copy_color",value:function(t){this.material.uniforms._Color.value.copy(t)}},{key:"thickness",set:function(t){this.material.uniforms._Thickness.value=t}},{key:"color",set:function(t){this.material.uniforms._Color.value.set(t)}}]),i}();exports.default=y;
},{"/shaders/basic_line/basic_line_vert":"uwzL","/shaders/basic_line/basic_line_frag":"f148"}],"m3BF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("/components/Grid")),t=u(require("/components/UIElement")),r=u(require("/components/Line"));function u(e){return e&&e.__esModule?e:{default:e}}var n={Grid:e.default,Line:r.default,UIElement:t.default};exports.default=n;
},{"/components/Grid":"rXwc","/components/UIElement":"IBEu","/components/Line":"BhSJ"}],"LsO8":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function t(n){e(this,t),this.uses_dynamic_font=n,this.__textHeight=null,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return n(t,[{key:"getFontHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Arial";if(null==this.__textHeight||this.uses_dynamic_font){var t=document.getElementsByTagName("body")[0],n=document.createElement("div"),i=document.createTextNode("MqgOLAKTAL");n.appendChild(i),n.setAttribute("style","font:".concat(e,";position:absolute;top:0;left:0")),t.appendChild(n),this.__textHeight=n.offsetHeight,t.removeChild(n)}return this.__textHeight}},{key:"get_text_size",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"24px Arial",n=new THREE.Vector2;return this.ctx.font=t,n.x=Math.ceil(this.ctx.measureText(e).width)*window.devicePixelRatio,n.y=Math.ceil(this.getFontHeight(t))*window.devicePixelRatio,n}},{key:"draw_canvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.font=t.font||"24px Arial",t.font_color=t.font_color||"#000000",this.__draw(e,t,this.canvas,this.ctx),this.canvas}},{key:"draw_on_texture",value:function(e,t){var n=this.draw_canvas(e,t),i=new THREE.CanvasTexture(n,THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter);return i.generateMipMaps=!1,i.needsUpdate=!0,i}},{key:"__draw",value:function(e,t){}},{key:"roundRect",value:function(e,t,n,i,a,r,o,l){if(void 0===l&&(l=!0),void 0===r&&(r=5),"number"==typeof r)r={tl:r,tr:r,br:r,bl:r};else{var u={tl:0,tr:0,br:0,bl:0};for(var s in u)r[s]=r[s]||u[s]}e.beginPath(),e.moveTo(t+r.tl,n),e.lineTo(t+i-r.tr,n),e.quadraticCurveTo(t+i,n,t+i,n+r.tr),e.lineTo(t+i,n+a-r.br),e.quadraticCurveTo(t+i,n+a,t+i-r.br,n+a),e.lineTo(t+r.bl,n+a),e.quadraticCurveTo(t,n+a,t,n+a-r.bl),e.lineTo(t,n+r.tl),e.quadraticCurveTo(t,n,t+r.tl,n),e.closePath(),o&&e.fill(),l&&e.stroke()}}]),t}();exports.default=i;
},{}],"hKPB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/canvas_drawer/CanvasDrawer"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,n=p(t);if(s()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){u(o,t.default);var n=f(o);function o(){var t;return r(this,o),(t=n.call(this)).text_margin=new THREE.Vector2(2,0),t}return i(o,[{key:"__draw",value:function(t,e,n,r){r.font=e.font;var o=this.get_text_size(t,e.font);n.width=Math.ceil(o.x+2*this.text_margin.x),n.height=Math.ceil(o.y+2*this.text_margin.y),r.clearRect(0,0,n.width,n.height),r.globalAlpha=1,r.font=e.font,r.fillStyle=e.font_color||"#000000",r.textBaseline="middle",r.textAlignment="left",r.fillText(t,0,n.height/2)}}]),o}();exports.default=y;
},{"/canvas_drawer/CanvasDrawer":"LsO8"}],"Focm":[function(require,module,exports) {
"use strict";var e=E(require("/utilities/ArrayUtilities.js")),r=E(require("/BaseApplication")),i=E(require("/materials/BaseShaderMaterial")),a=E(require("/CameraManager")),t=E(require("/utilities/CameraUtilities")),u=E(require("/Capabilities")),l=E(require("/Configuration")),d=E(require("/utilities/EasingFunctions")),s=E(require("/EventManager")),n=E(require("/Debug")),o=E(require("/Graphics")),f=E(require("/Input")),q=E(require("/utilities/MathUtilities")),c=E(require("/render_mode/NormalRender")),m=E(require("/render_mode/DeferredRender")),p=E(require("/render_mode/DebugNormalsRender")),g=E(require("/utilities/ObjectUtilities")),C=E(require("/PerspectiveCamera")),U=E(require("/RenderLoop")),M=E(require("/resource_loader/ResourceBatch")),R=E(require("/ResourceContainer")),D=E(require("/SceneManager")),v=E(require("/Screen")),b=E(require("/Time")),h=E(require("/UI")),S=E(require("/utilities/TimeUtilities")),_=E(require("/utilities/ImageUtilities")),w=E(require("/utilities/ModelUtilities")),B=E(require("/utilities/Validation")),I=E(require("/Components")),T=E(require("/canvas_drawer/CanvasDrawer")),A=E(require("/canvas_drawer/SimpleTextDrawer"));function E(e){return e&&e.__esModule?e:{default:e}}module.exports={ArrayUtilities:e.default,BaseApplication:r.default,BaseShaderMaterial:i.default,CameraManager:a.default,CameraUtilities:t.default,Capabilities:u.default,Configuration:l.default,EasingFunctions:d.default,EventManager:s.default,Debug:n.default,Graphics:o.default,Input:f.default,MathUtilities:q.default,NormalRender:c.default,DeferredRender:m.default,DebugNormalsRender:p.default,ObjectUtilities:g.default,PerspectiveCamera:C.default,RenderLoop:U.default,ResourceBatch:M.default,ResourceContainer:R.default,SceneManager:D.default,Screen:v.default,Time:b.default,TimeUtilities:S.default,ImageUtilities:_.default,ModelUtilities:w.default,Validation:B.default,Components:I.default,UI:h.default,CanvasDrawer:T.default,SimpleTextDrawer:A.default};
},{"/utilities/ArrayUtilities.js":"INHd","/BaseApplication":"v0GF","/materials/BaseShaderMaterial":"Ej2H","/CameraManager":"XMgG","/utilities/CameraUtilities":"ugwp","/Capabilities":"hZlU","/Configuration":"RyjO","/utilities/EasingFunctions":"ZeWG","/EventManager":"pJqg","/Debug":"J9UP","/Graphics":"xMH9","/Input":"k3P6","/utilities/MathUtilities":"ayC1","/render_mode/NormalRender":"Zz8J","/render_mode/DeferredRender":"VyPa","/render_mode/DebugNormalsRender":"M0uM","/utilities/ObjectUtilities":"rJQo","/PerspectiveCamera":"iUFL","/RenderLoop":"QYq1","/resource_loader/ResourceBatch":"gkjv","/ResourceContainer":"HJ6F","/SceneManager":"qvMM","/Screen":"JIgx","/Time":"wewU","/UI":"yntx","/utilities/TimeUtilities":"wwEn","/utilities/ImageUtilities":"XAIA","/utilities/ModelUtilities":"c2tY","/utilities/Validation":"bOug","/Components":"m3BF","/canvas_drawer/CanvasDrawer":"LsO8","/canvas_drawer/SimpleTextDrawer":"hKPB"}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map